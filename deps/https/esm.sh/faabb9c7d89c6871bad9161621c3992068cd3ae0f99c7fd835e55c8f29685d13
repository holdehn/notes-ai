/* esm.sh - esbuild bundle(p-retry@4.6.2) deno production */
import * as _1$ from "/v119/retry@0.13.1/deno/retry.mjs";const __1$ = _1$.default??_1$;var k=Object.create;var u=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var F=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(r,e)=>(typeof require<"u"?require:r)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var N=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),T=(t,r)=>{for(var e in r)u(t,e,{get:r[e],enumerable:!0})},l=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of _(r))!g.call(t,o)&&o!==e&&u(t,o,{get:()=>r[o],enumerable:!(n=m(r,o))||n.enumerable});return t},a=(t,r,e)=>(l(t,r,"default"),e&&l(e,r,"default")),p=(t,r,e)=>(e=t!=null?k(A(t)):{},l(r||!t||!t.__esModule?u(e,"default",{value:t,enumerable:!0}):e,t));var E=N((W,f)=>{"use strict";var b=__1$,q=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],c=class extends Error{constructor(r){super(),r instanceof Error?(this.originalError=r,{message:r}=r):(this.originalError=new Error(r),this.originalError.stack=this.stack),this.name="AbortError",this.message=r}},L=(t,r,e)=>{let n=e.retries-(r-1);return t.attemptNumber=r,t.retriesLeft=n,t},C=t=>q.includes(t),d=(t,r)=>new Promise((e,n)=>{r={onFailedAttempt:()=>{},retries:10,...r};let o=b.operation(r);o.attempt(async h=>{try{e(await t(h))}catch(s){if(!(s instanceof Error)){n(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof c)o.stop(),n(s.originalError);else if(s instanceof TypeError&&!C(s.message))o.stop(),n(s);else{L(s,h,r);try{await r.onFailedAttempt(s)}catch(x){n(x);return}o.retry(s)||n(o.mainError())}}})});f.exports=d;f.exports.default=d;f.exports.AbortError=c});var i={};T(i,{AbortError:()=>I,default:()=>P});var y=p(E());a(i,p(E()));var{AbortError:I}=y,{default:w,...M}=y,P=w!==void 0?w:M;export{I as AbortError,P as default};
//# sourceMappingURL=p-retry.mjs.map