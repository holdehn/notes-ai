/* esm.sh - esbuild bundle(streamsearch@1.1.0) deno production */
import  { Buffer as __Buffer$ } from "https://deno.land/std@0.177.0/node/buffer.ts";var x=Object.create;var d=Object.defineProperty;var B=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var L=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports),M=(o,i)=>{for(var n in i)d(o,n,{get:i[n],enumerable:!0})},l=(o,i,n,e)=>{if(i&&typeof i=="object"||typeof i=="function")for(let r of C(i))!E.call(o,r)&&r!==n&&d(o,r,{get:()=>i[r],enumerable:!(e=B(i,r))||e.enumerable});return o},b=(o,i,n)=>(l(o,i,"default"),n&&l(n,i,"default")),P=(o,i,n)=>(n=o!=null?x(N(o)):{},l(i||!o||!o.__esModule?d(n,"default",{value:o,enumerable:!0}):n,o));var z=L((j,y)=>{"use strict";function p(o,i,n,e,r){for(let t=0;t<r;++t)if(o[i+t]!==n[e+t])return!1;return!0}var k=class{constructor(i,n){if(typeof n!="function")throw new Error("Missing match callback");if(typeof i=="string")i=__Buffer$.from(i);else if(!__Buffer$.isBuffer(i))throw new Error(`Expected Buffer for needle, got ${typeof i}`);let e=i.length;if(this.maxMatches=1/0,this.matches=0,this._cb=n,this._lookbehindSize=0,this._needle=i,this._bufPos=0,this._lookbehind=__Buffer$.allocUnsafe(e),this._occ=[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],e>1)for(let r=0;r<e-1;++r)this._occ[i[r]]=e-1-r}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(i,n){let e;__Buffer$.isBuffer(i)||(i=__Buffer$.from(i,"latin1"));let r=i.length;for(this._bufPos=n||0;e!==r&&this.matches<this.maxMatches;)e=I(this,i);return e}destroy(){let i=this._lookbehindSize;i&&this._cb(!1,this._lookbehind,0,i,!1),this.reset()}};function I(o,i){let n=i.length,e=o._needle,r=e.length,t=-o._lookbehindSize,s=r-1,u=e[s],f=n-r,m=o._occ,c=o._lookbehind;if(t<0){for(;t<0&&t<=f;){let h=t+s,a=h<0?c[o._lookbehindSize+h]:i[h];if(a===u&&w(o,i,t,s))return o._lookbehindSize=0,++o.matches,t>-o._lookbehindSize?o._cb(!0,c,0,o._lookbehindSize+t,!1):o._cb(!0,void 0,0,0,!0),o._bufPos=t+r;t+=m[a]}for(;t<0&&!w(o,i,t,n-t);)++t;if(t<0){let h=o._lookbehindSize+t;return h>0&&o._cb(!1,c,0,h,!1),o._lookbehindSize-=h,c.copy(c,0,h,o._lookbehindSize),c.set(i,o._lookbehindSize),o._lookbehindSize+=n,o._bufPos=n,n}o._cb(!1,c,0,o._lookbehindSize,!1),o._lookbehindSize=0}t+=o._bufPos;let S=e[0];for(;t<=f;){let h=i[t+s];if(h===u&&i[t]===S&&p(e,0,i,t,s))return++o.matches,t>0?o._cb(!0,i,o._bufPos,t,!0):o._cb(!0,void 0,0,0,!0),o._bufPos=t+r;t+=m[h]}for(;t<n;){if(i[t]!==S||!p(i,t,e,0,n-t)){++t;continue}i.copy(c,0,t,n),o._lookbehindSize=n-t;break}return t>0&&o._cb(!1,i,o._bufPos,t<n?t:n,!0),o._bufPos=n,n}function w(o,i,n,e){let r=o._lookbehind,t=o._lookbehindSize,s=o._needle;for(let u=0;u<e;++u,++n)if((n<0?r[t+n]:i[n])!==s[u])return!1;return!0}y.exports=k});var _={};M(_,{default:()=>U});var O=P(z());b(_,P(z()));var{default:g,...T}=O,U=g!==void 0?g:T;export{U as default};
//# sourceMappingURL=streamsearch.mjs.map