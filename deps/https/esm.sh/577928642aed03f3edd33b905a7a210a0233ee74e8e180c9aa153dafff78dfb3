/* esm.sh - esbuild bundle(langchain@0.0.66/llms/openai) deno production */
import __Process$ from "https://deno.land/std@0.177.0/node/process.ts";var We=Object.defineProperty;var p=(n,e)=>()=>(n&&(e=n(n=0)),e);var we=(n,e)=>{for(var t in e)We(n,t,{get:e[t],enumerable:!0})};async function Pe(n,e){let t=n.getReader(),r;for(;!(r=await t.read()).done;)e(r.value)}function xe(n){let e,t,r,a=!1;return function(i){e===void 0?(e=i,t=0,r=-1):e=Be(e,i);let o=e.length,u=0;for(;t<o;){a&&(e[t]===10&&(u=++t),a=!1);let c=-1;for(;t<o&&c===-1;++t)switch(e[t]){case 58:r===-1&&(r=t-u);break;case 13:a=!0;case 10:c=t;break}if(c===-1)break;n(e.subarray(u,c),r),u=t,r=-1}u===o?e=void 0:u!==0&&(e=e.subarray(u),t-=u)}}function ve(n,e,t){let r=_e(),a=new TextDecoder;return function(i,o){if(i.length===0)n?.(r),r=_e();else if(o>0){let u=a.decode(i.subarray(0,o)),c=o+(i[o+1]===32?2:1),l=a.decode(i.subarray(c));switch(u){case"data":r.data=r.data?r.data+`
`+l:l;break;case"event":r.event=l;break;case"id":e?.(r.id=l);break;case"retry":{let h=parseInt(l,10);Number.isNaN(h)||t?.(r.retry=h);break}}}}}function Be(n,e){let t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function _e(){return{data:"",event:"",id:"",retry:void 0}}var D,Te=p(()=>{D="text/event-stream"});import K from"/v118/axios@1.4.0/deno/axios.mjs";function Fe(n,e,t){let{validateStatus:r}=t.config;!t.status||!r||r(t.status)?n(t):e(H(`Request failed with status code ${t.status}`,t.config,null,t.request,t))}function Je(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Ye(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}function ke(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ge(n,e,t){if(!e)return n;var r;if(t)r=t(e);else if(et(e))r=e.toString();else{var a=[];Oe(e,function(o,u){o===null||typeof o>"u"||(Ee(o)?u=`${u}[]`:o=[o],Oe(o,function(l){Ze(l)?l=l.toISOString():Xe(l)&&(l=JSON.stringify(l)),a.push(`${ke(u)}=${ke(l)}`)}))}),r=a.join("&")}if(r){var s=n.indexOf("#");s!==-1&&(n=n.slice(0,s)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}function Qe(n,e){return n&&!Je(e)?Ye(n,e):e}function Ve(n){return typeof n>"u"}function Xe(n){return n!==null&&typeof n=="object"}function Ze(n){return toString.call(n)==="[object Date]"}function et(n){return toString.call(n)==="[object URLSearchParams]"}function Ee(n){return Array.isArray(n)}function Oe(n,e){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),Ee(n))for(var t=0,r=n.length;t<r;t++)e.call(null,n[t],t,n);else for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.call(null,n[a],a,n)}function tt(n){return toString.call(n)==="[object FormData]"}function rt(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof document<"u"&&typeof document<"u"}async function k(n){let e=at(n),t=await nt(e,n);return new Promise((r,a)=>{t instanceof Error?a(t):Object.prototype.toString.call(n.settle)==="[object Function]"?n.settle(r,a,t):Fe(r,a,t)})}async function nt(n,e){let t;try{t=await fetch(n)}catch(s){return s&&s.name==="AbortError"?H("Request aborted",e,"ECONNABORTED",n):s&&s.name==="TimeoutError"?H("Request timeout",e,"ECONNABORTED",n):H("Network Error",e,"ERR_NETWORK",n)}let r={};t.headers.forEach((s,i)=>{r[i]=s});let a={ok:t.ok,status:t.status,statusText:t.statusText,headers:r,config:e,request:n};if(t.status>=200&&t.status!==204)if(e.responseType==="stream"){let s=t.headers.get("content-type");if(!s?.startsWith(D))throw new Error(`Expected content-type to be ${D}, Actual: ${s}`);await Pe(t.body,xe(ve(e.onmessage)))}else switch(e.responseType){case"arraybuffer":a.data=await t.arrayBuffer();break;case"blob":a.data=await t.blob();break;case"json":a.data=await t.json();break;case"formData":a.data=await t.formData();break;default:a.data=await t.text();break}return a}function at(n){let e=new Headers(n.headers);if(n.auth){let i=n.auth.username||"",o=n.auth.password?decodeURI(encodeURIComponent(n.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${i}:${o}`)}`)}let t=n.method.toUpperCase(),r={headers:e,method:t};t!=="GET"&&t!=="HEAD"&&(r.body=n.data,tt(r.body)&&rt()&&e.delete("Content-Type")),n.mode&&(r.mode=n.mode),n.cache&&(r.cache=n.cache),n.integrity&&(r.integrity=n.integrity),n.redirect&&(r.redirect=n.redirect),n.referrer&&(r.referrer=n.referrer),n.timeout&&n.timeout>0&&(r.signal=AbortSignal.timeout(n.timeout)),n.signal&&(r.signal=n.signal),Ve(n.withCredentials)||(r.credentials=n.withCredentials?"include":"omit"),n.responseType==="stream"&&r.headers.set("Accept",D);let a=Qe(n.baseURL,n.url),s=Ge(a,n.params,n.paramsSerializer);return new Request(s,r)}function H(n,e,t,r,a){if(K.AxiosError&&typeof K.AxiosError=="function")return new K.AxiosError(n,K.AxiosError[t],e,r,a);let s=new Error(n);return st(s,e,t,r,a)}function st(n,e,t,r,a){return n.config=e,t&&(n.code=t),n.request=r,n.response=a,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},n}var U=p(()=>{Te()});var te,Ae=p(()=>{te=(n,e)=>n.reduce((t,r,a)=>{let s=Math.floor(a/e),i=t[s]||[];return t[s]=i.concat([r]),t},[])});import it from"/v118/object-hash@3.0.0/deno/object-hash.mjs";var re,Le=p(()=>{re=(...n)=>it(n.join("_"))});var F,E,q,C,z,W,B,S=p(()=>{F="__run",E=class{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e}},q=class extends E{_getType(){return"human"}},C=class extends E{_getType(){return"ai"}},z=class extends E{_getType(){return"system"}},W=class extends E{constructor(e,t){super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=t}_getType(){return"generic"}},B=class{}});var ot,A,je=p(()=>{Le();S();ot=new Map,A=class extends B{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(re(e,t))??null)}async update(e,t,r){this.cache.set(re(e,t),r)}static global(){return new A(ot)}}});import ut from"/v118/p-retry@4.6.2/deno/p-retry.mjs";import ne from"/v118/p-queue@6.6.2/deno/p-queue.mjs";var lt,J,Ne=p(()=>{lt=[400,401,403,404,405,406,407,408,409],J=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;let t="default"in ne?ne.default:ne;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>ut(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt(r){if(r.message.startsWith("Cancel")||r.message.startsWith("TimeoutError")||r.message.startsWith("AbortError")||r?.code==="ECONNABORTED")throw r;let a=r?.response?.status;if(a&&lt.includes(+a))throw r},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}});var O,ct,ae,Me,Y=p(()=>{O=n=>n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k-")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n,ct=n=>{switch(O(n)){case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}},ae=async()=>{try{let{encoding_for_model:n}=await import("/v118/@dqbd/tiktoken@1.0.7/deno/tiktoken.mjs");return{encoding_for_model:n}}catch(n){return console.log(n),{encoding_for_model:null}}},Me=async({prompt:n,modelName:e})=>{let{encoding_for_model:t}=await ae(),r=Math.ceil(n.length/4);try{if(t){let s=t(O(e));r=s.encode(n).length,s.free()}}catch(s){console.warn("Failed to calculate number of tokens with tiktoken, falling back to approximate count",s)}return ct(e)-r}});function Ce(n,e="Human",t="AI"){let r=[];for(let a of n){let s;if(a._getType()==="human")s=e;else if(a._getType()==="ai")s=t;else if(a._getType()==="system")s="System";else if(a._getType()==="generic")s=a.role;else throw new Error(`Got unsupported message type: ${a}`);r.push(`${s}: ${a.text}`)}return r.join(`
`)}var Se=p(()=>{});import{v4 as ht}from"/v118/uuid@9.0.0/deno/uuid.mjs";var se,P,G=p(()=>{se=class{},P=class extends se{constructor(e){super(),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent)}copy(){return new this.constructor(this)}static fromMethods(e){class t extends P{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:ht()}),Object.assign(this,e)}}return new t}}});var Q,Ie=p(()=>{G();Q=class extends P{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}handleLLMStart(e,t,r){console.log(`Starting LLM ${r} with name ${e.name} with prompts: ${t.join(", ")}
`)}handleLLMError(e,t){console.log(`LLM ${t} errored: ${e}
`)}handleLLMEnd(e,t){console.log(`LLM ${t} finished: ${JSON.stringify(e)}
`)}handleChainStart(e){console.log(`Entering new ${e.name} chain...`)}handleChainEnd(e){console.log("Finished chain.")}handleAgentAction(e){console.log(e.log)}handleToolEnd(e){console.log(e)}handleText(e){console.log(e)}handleAgentEnd(e){console.log(e.log)}}});var ie,L,Re=p(()=>{G();ie=class extends P{constructor(){super(),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"executionOrder",{enumerable:!0,configurable:!0,writable:!0,value:1})}async newSession(e){let t={start_time:Date.now(),name:e},r=await this.persistSession(t);return this.session=r,r}_addChildRun(e,t){if(t.type==="llm")e.child_llm_runs.push(t);else if(t.type==="chain")e.child_chain_runs.push(t);else if(t.type==="tool")e.child_tool_runs.push(t);else throw new Error("Invalid run type")}_startTrace(e){if(this.executionOrder+=1,e.parent_uuid){let t=this.runMap.get(e.parent_uuid);if(t)if(t.type==="tool"||t.type==="chain")this._addChildRun(t,e);else throw new Error("Caller run can only be a tool or chain");else throw new Error(`Caller run ${e.parent_uuid} not found`)}this.runMap.set(e.uuid,e)}async _endTrace(e){e.parent_uuid||(await this.persistRun(e),this.executionOrder=1),this.runMap.delete(e.uuid)}async handleLLMStart(e,t,r,a){this.session===void 0&&(this.session=await this.loadDefaultSession());let s={uuid:r,parent_uuid:a,start_time:Date.now(),end_time:0,serialized:e,prompts:t,session_id:this.session.id,execution_order:this.executionOrder,type:"llm"};this._startTrace(s)}async handleLLMEnd(e,t){let r=this.runMap.get(t);if(!r||r?.type!=="llm")throw new Error("No LLM run to end.");let a=r;a.end_time=Date.now(),a.response=e,await this._endTrace(a)}async handleLLMError(e,t){let r=this.runMap.get(t);if(!r||r?.type!=="llm")throw new Error("No LLM run to end.");let a=r;a.end_time=Date.now(),a.error=e.message,await this._endTrace(a)}async handleChainStart(e,t,r,a){this.session===void 0&&(this.session=await this.loadDefaultSession());let s={uuid:r,parent_uuid:a,start_time:Date.now(),end_time:0,serialized:e,inputs:t,session_id:this.session.id,execution_order:this.executionOrder,type:"chain",child_llm_runs:[],child_chain_runs:[],child_tool_runs:[]};this._startTrace(s)}async handleChainEnd(e,t){let r=this.runMap.get(t);if(!r||r?.type!=="chain")throw new Error("No chain run to end.");let a=r;a.end_time=Date.now(),a.outputs=e,await this._endTrace(a)}async handleChainError(e,t){let r=this.runMap.get(t);if(!r||r?.type!=="chain")throw new Error("No chain run to end.");let a=r;a.end_time=Date.now(),a.error=e.message,await this._endTrace(a)}async handleToolStart(e,t,r,a){this.session===void 0&&(this.session=await this.loadDefaultSession());let s={uuid:r,parent_uuid:a,start_time:Date.now(),end_time:0,serialized:e,tool_input:t,session_id:this.session.id,execution_order:this.executionOrder,type:"tool",action:JSON.stringify(e),child_llm_runs:[],child_chain_runs:[],child_tool_runs:[]};this._startTrace(s)}async handleToolEnd(e,t){let r=this.runMap.get(t);if(!r||r?.type!=="tool")throw new Error("No tool run to end");let a=r;a.end_time=Date.now(),a.output=e,await this._endTrace(a)}async handleToolError(e,t){let r=this.runMap.get(t);if(!r||r?.type!=="tool")throw new Error("No tool run to end");let a=r;a.end_time=Date.now(),a.error=e.message,await this._endTrace(a)}},L=class extends ie{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:(typeof __Process$<"u"?__Process$.env?.LANGCHAIN_ENDPOINT:void 0)||"http://localhost:8000"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),typeof __Process$<"u"&&__Process$.env?.LANGCHAIN_API_KEY&&(this.headers["x-api-key"]=__Process$.env?.LANGCHAIN_API_KEY)}async persistRun(e){let t;e.type==="llm"?t=`${this.endpoint}/llm-runs`:e.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`;let r=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});r.ok||console.error(`Failed to persist run: ${r.status} ${r.statusText}`)}async persistSession(e){let t=`${this.endpoint}/sessions`,r=await fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return r.ok?{id:(await r.json()).id,...e}:(console.error(`Failed to persist session: ${r.status} ${r.statusText}, using default session.`),{id:1,...e})}async loadSession(e){let t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)}async loadDefaultSession(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)}async _handleSessionResponse(e){let t=await fetch(e,{method:"GET",headers:this.headers}),r;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),r={id:1,start_time:Date.now()},this.session=r,r;let a=await t.json();return a.length===0?(r={id:1,start_time:Date.now()},this.session=r,r):([r]=a,this.session=r,r)}copy(){if(this.executionOrder===1){let e=new L;return e.session=this.session,e.runMap=new Map(this.runMap),e.executionOrder=this.executionOrder,e}return this}}});async function $e(n){let e=new L;return n?await e.loadSession(n):await e.loadDefaultSession(),e}var De=p(()=>{Re()});import{v4 as V}from"/v118/uuid@9.0.0/deno/uuid.mjs";function Ke(n){return"name"in n?n:P.fromMethods(n)}var oe,I,ue,le,ce,y,he=p(()=>{G();Ie();De();oe=class{setHandler(e){return this.setHandlers([e])}},I=class{constructor(e,t,r,a){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:a})}async handleText(e){await Promise.all(this.handlers.map(async t=>{try{await t.handleText?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleText: ${r}`)}}))}},ue=class extends I{async handleLLMNewToken(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreLLM)try{await t.handleLLMNewToken?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleLLMNewToken: ${r}`)}}))}async handleLLMError(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreLLM)try{await t.handleLLMError?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${r}`)}}))}async handleLLMEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreLLM)try{await t.handleLLMEnd?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${r}`)}}))}},le=class extends I{getChild(){let e=new y(this.runId);return e.setHandlers(this.inheritableHandlers),e}async handleChainError(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreChain)try{await t.handleChainError?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${r}`)}}))}async handleChainEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreChain)try{await t.handleChainEnd?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${r}`)}}))}async handleAgentAction(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleAgentAction?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${r}`)}}))}async handleAgentEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleAgentEnd?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${r}`)}}))}},ce=class extends I{getChild(){let e=new y(this.runId);return e.setHandlers(this.inheritableHandlers),e}async handleToolError(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleToolError?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${r}`)}}))}async handleToolEnd(e){await Promise.all(this.handlers.map(async t=>{if(!t.ignoreAgent)try{await t.handleToolEnd?.(e,this.runId,this._parentRunId)}catch(r){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${r}`)}}))}},y=class extends oe{constructor(e){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=[],this.inheritableHandlers=[],this._parentRunId=e}async handleLLMStart(e,t,r=V()){return await Promise.all(this.handlers.map(async a=>{if(!a.ignoreLLM)try{await a.handleLLMStart?.(e,t,r,this._parentRunId)}catch(s){console.error(`Error in handler ${a.constructor.name}, handleLLMStart: ${s}`)}})),new ue(r,this.handlers,this.inheritableHandlers,this._parentRunId)}async handleChainStart(e,t,r=V()){return await Promise.all(this.handlers.map(async a=>{if(!a.ignoreChain)try{await a.handleChainStart?.(e,t,r,this._parentRunId)}catch(s){console.error(`Error in handler ${a.constructor.name}, handleChainStart: ${s}`)}})),new le(r,this.handlers,this.inheritableHandlers,this._parentRunId)}async handleToolStart(e,t,r=V()){return await Promise.all(this.handlers.map(async a=>{if(!a.ignoreAgent)try{await a.handleToolStart?.(e,t,r,this._parentRunId)}catch(s){console.error(`Error in handler ${a.constructor.name}, handleToolStart: ${s}`)}})),new ce(r,this.handlers,this.inheritableHandlers,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(let r of e)this.addHandler(r,t)}copy(e=[],t=!0){let r=new y(this._parentRunId);r.setHandlers([...this.handlers].map(a=>a.copy()));for(let a of e)r.addHandler(a.copy(),t);return r}static fromHandlers(e){class t extends P{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:V()}),Object.assign(this,e)}}let r=new this;return r.addHandler(new t),r}static async configure(e,t,r){let a;(e||t)&&(Array.isArray(e)||!e?(a=new y,a.setHandlers(e?.map(Ke)??[],!0)):a=e,a=a.copy(Array.isArray(t)?t.map(Ke):t?.handlers,!1));let s=typeof __Process$<"u"?__Process$.env?.LANGCHAIN_TRACING!==void 0:!1;if(r?.verbose||s){a||(a=new y);let i=new Q;if(r?.verbose&&!a.handlers.some(o=>o.name===i.name)&&a.addHandler(i,!0),s&&!a.handlers.some(o=>o.name==="langchain_tracer")){let o=typeof __Process$<"u"?__Process$.env?.LANGCHAIN_SESSION:void 0;a.addHandler(await $e(o),!0)}}return a}}});var X,He=p(()=>{S();de();Se();he();X=class extends j{constructor(e){super(e)}async generate(e,t,r){let a=[],s=[],i=e.map(l=>Ce(l)),u=await(await y.configure(r,this.callbacks,{verbose:this.verbose}))?.handleLLMStart({name:this._llmType()},i);try{for(let l of e){let h=await this._generate(l,t,u);h.llmOutput&&s.push(h.llmOutput),a.push(h.generations)}}catch(l){throw await u?.handleLLMError(l),l}let c={generations:a,llmOutput:s.length?this._combineLLMOutput?.(...s):void 0};return await u?.handleLLMEnd(c),Object.defineProperty(c,F,{value:u?{runId:u?.runId}:void 0,configurable:!0}),c}_modelType(){return"base_chat_model"}async generatePrompt(e,t,r){let a=e.map(s=>s.toChatMessages());return this.generate(a,t,r)}async call(e,t,r){return(await this.generate([e],t,r)).generations[0][0].message}async callPrompt(e,t,r){let a=e.toChatMessages();return this.call(a,t,r)}}});var Ue={};we(Ue,{ChatOpenAI:()=>pe});import{Configuration as dt,OpenAIApi as pt}from"/v118/openai@3.2.1/deno/openai.mjs";function mt(n){switch(n){case"system":return"system";case"ai":return"assistant";case"human":return"user";default:throw new Error(`Unknown message type: ${n}`)}}function ft(n,e){switch(n){case"user":return new q(e);case"assistant":return new C(e);case"system":return new z(e);default:return new W(e,n??"unknown")}}var pe,qe=p(()=>{U();He();S();Y();pe=class extends X{constructor(e,t){super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.openAIApiKey??(typeof __Process$<"u"?__Process$.env?.OPENAI_API_KEY:void 0);if(!r)throw new Error("OpenAI API key not found");if(this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.streaming&&this.n>1)throw new Error("Cannot stream results when n > 1");this.clientConfig={apiKey:r,...t}}invocationParams(){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens,n:this.n,logit_bias:this.logitBias,stop:this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,t,r){let a=Array.isArray(t)?t:t?.stop,s=Array.isArray(t)?{}:t?.options??{},i={};if(this.stop&&a)throw new Error("Stop found in input and default params");let o=this.invocationParams();o.stop=a??o.stop;let u=e.map(d=>({role:mt(d._getType()),content:d.text,name:d.name})),c=o.stream?await new Promise((d,b)=>{let g,$=!1;this.completionWithRetry({...o,messages:u},{...s,responseType:"stream",onmessage:x=>{if(x.data?.trim?.()==="[DONE]")d(g);else{let v=JSON.parse(x.data);g||(g={id:v.id,object:v.object,created:v.created,model:v.model,choices:[]});let w=v.choices[0];if(w!=null){let _=g.choices.find(T=>T.index===w.index);_||(_={index:w.index,finish_reason:w.finish_reason??void 0},g.choices.push(_)),_.message||(_.message={role:w.delta?.role,content:w.delta?.content??""}),_.message.content+=w.delta?.content??"",r?.handleLLMNewToken(w.delta?.content??"")}}}}).catch(x=>{$||($=!0,b(x))})}):await this.completionWithRetry({...o,messages:u},s),{completion_tokens:l,prompt_tokens:h,total_tokens:m}=c.usage??{};l&&(i.completionTokens=(i.completionTokens??0)+l),h&&(i.promptTokens=(i.promptTokens??0)+h),m&&(i.totalTokens=(i.totalTokens??0)+m);let f=[];for(let d of c.choices){let b=d.message?.role??void 0,g=d.message?.content??"";f.push({text:g,message:ft(b,g)})}return{generations:f,llmOutput:{tokenUsage:i}}}async getNumTokensFromMessages(e){let t=0,r=0,a=0;O(this.modelName)==="gpt-3.5-turbo"?(r=4,a=-1):O(this.modelName).startsWith("gpt-4")&&(r=3,a=1);let s=await Promise.all(e.map(async i=>{let u=await this.getNumTokens(i.text)+r+(i.name?a:0);return t+=u,u}));return{totalCount:t,countPerMessage:s}}async completionWithRetry(e,t){if(!this.client){let r=new dt({...this.clientConfig,baseOptions:{timeout:this.timeout,adapter:k,...this.clientConfig.baseOptions}});this.client=new pt(r)}return this.caller.call(this.client.createChatCompletion.bind(this.client),e,t).then(r=>r.data)}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((t,r)=>(r&&r.tokenUsage&&(t.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}});var bt,me,j,de=p(()=>{Ne();Y();bt=()=>!1,me=class{constructor(e){Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??bt(),this.callbacks=e.callbacks}},j=class extends me{constructor(e){super({verbose:e.verbose,callbacks:e.callbacks??e.callbackManager}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_registry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new J(e??{})}async getNumTokens(e){let t=Math.ceil(e.length/4);try{if(!this._encoding){let{encoding_for_model:r}=await ae();r&&(this._encoding=r("modelName"in this?O(this.modelName):"gpt2"),this._registry=new FinalizationRegistry(a=>a.free()),this._registry.register(this,this._encoding))}this._encoding&&(t=this._encoding.encode(e).length)}catch(r){console.warn("Failed to calculate number of tokens with tiktoken, falling back to approximate count",r)}return t}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){let{_type:t,_model:r,...a}=e;if(r&&r!=="base_chat_model")throw new Error(`Cannot load LLM with model ${r}`);let s={openai:(await Promise.resolve().then(()=>(qe(),Ue))).ChatOpenAI}[t];if(s===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new s(a)}}});var R,Z,fe=p(()=>{je();S();de();he();R=class extends j{constructor({cache:e,concurrency:t,...r}){super(t?{maxConcurrency:t,...r}:r),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof e=="object"?this.cache=e:e?this.cache=A.global():this.cache=void 0}async generatePrompt(e,t,r){let a=e.map(s=>s.toString());return this.generate(a,t,r)}async _generateUncached(e,t,r){let s=await(await y.configure(r,this.callbacks,{verbose:this.verbose}))?.handleLLMStart({name:this._llmType()},e),i;try{i=await this._generate(e,t,s)}catch(o){throw await s?.handleLLMError(o),o}return await s?.handleLLMEnd(i),Object.defineProperty(i,F,{value:s?{runId:s?.runId}:void 0,configurable:!0}),i}async generate(e,t,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");if(!this.cache)return this._generateUncached(e,t,r);let{cache:a}=this,s=this.serialize();s.stop=t;let i=`${Object.entries(s).sort()}`,o=[],u=await Promise.all(e.map(async(l,h)=>{let m=await a.lookup(l,i);return m||o.push(h),m})),c={};if(o.length>0){let l=await this._generateUncached(o.map(h=>e[h]),t,r);await Promise.all(l.generations.map(async(h,m)=>{let f=o[m];return u[f]=h,a.update(e[f],i,h)})),c=l.llmOutput??{}}return{generations:u,llmOutput:c}}async call(e,t,r){let{generations:a}=await this.generate([e],t,r);return a[0][0].text}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}static async deserialize(e){let{_type:t,_model:r,...a}=e;if(r&&r!=="base_llm")throw new Error(`Cannot load LLM with model ${r}`);let s={openai:(await Promise.resolve().then(()=>(be(),ze))).OpenAI}[t];if(s===void 0)throw new Error(`Cannot load  LLM with type ${t}`);return new s(a)}},Z=class extends R{async _generate(e,t,r){let a=[];for(let s=0;s<e.length;s+=1){let i=await this._call(e[s],t,r);a.push([{text:i}])}return{generations:a}}}});import{Configuration as gt,OpenAIApi as yt}from"/v118/openai@3.2.1/deno/openai.mjs";var N,ge=p(()=>{U();fe();N=class extends Z{constructor(e,t){super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.openAIApiKey??(typeof __Process$<"u"?__Process$.env.OPENAI_API_KEY:void 0);if(!r)throw new Error("OpenAI API key not found");if(this.modelName=e?.modelName??this.modelName,this.prefixMessages=e?.prefixMessages??this.prefixMessages,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.maxTokens=e?.maxTokens,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.streaming&&this.n>1)throw new Error("Cannot stream results when n > 1");this.clientConfig={apiKey:r,...t}}invocationParams(){return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,logit_bias:this.logitBias,max_tokens:this.maxTokens,stop:this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}formatMessages(e){let t={role:"user",content:e};return this.prefixMessages?[...this.prefixMessages,t]:[t]}async _call(e,t,r){let a=Array.isArray(t)?t:t?.stop,s=Array.isArray(t)?{}:t?.options??{};if(this.stop&&a)throw new Error("Stop found in input and default params");let i=this.invocationParams();return i.stop=a??i.stop,(i.stream?await new Promise((u,c)=>{let l,h=!1;this.completionWithRetry({...i,messages:this.formatMessages(e)},{...s,responseType:"stream",onmessage:m=>{if(m.data?.trim?.()==="[DONE]")u(l);else{let f=JSON.parse(m.data);l||(l={id:f.id,object:f.object,created:f.created,model:f.model,choices:[]});let d=f.choices[0];if(d!=null){let b=l.choices.find(g=>g.index===d.index);b||(b={index:d.index,finish_reason:d.finish_reason??void 0},l.choices.push(b)),b.message||(b.message={role:d.delta?.role,content:d.delta?.content??""}),b.message.content+=d.delta?.content??"",r?.handleLLMNewToken(d.delta?.content??"")}}}}).catch(m=>{h||(h=!0,c(m))})}):await this.completionWithRetry({...i,messages:this.formatMessages(e)},s)).choices[0].message?.content??""}async completionWithRetry(e,t){if(!this.client){let r=new gt({...this.clientConfig,baseOptions:{timeout:this.timeout,adapter:k,...this.clientConfig.baseOptions}});this.client=new yt(r)}return this.caller.call(this.client.createChatCompletion.bind(this.client),e,t).then(r=>r.data)}_llmType(){return"openai"}}});var ze={};we(ze,{OpenAI:()=>ee,OpenAIChat:()=>N,PromptLayerOpenAI:()=>ye});import{Configuration as wt,OpenAIApi as _t}from"/v118/openai@3.2.1/deno/openai.mjs";var ee,ye,be=p(()=>{U();Ae();fe();Y();ge();ge();ee=class extends R{constructor(e,t){if(e?.modelName?.startsWith("gpt-3.5-turbo")||e?.modelName?.startsWith("gpt-4"))return new N(e,t);super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-davinci-003"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=e?.openAIApiKey??(typeof __Process$<"u"?__Process$.env?.OPENAI_API_KEY:void 0);if(!r)throw new Error("OpenAI API key not found");if(this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.batchSize=e?.batchSize??this.batchSize,this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.maxTokens=e?.maxTokens??this.maxTokens,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.bestOf=e?.bestOf??this.bestOf,this.logitBias=e?.logitBias,this.stop=e?.stop,this.streaming=e?.streaming??!1,this.streaming&&this.n>1)throw new Error("Cannot stream results when n > 1");if(this.streaming&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");this.clientConfig={apiKey:r,...t}}invocationParams(){return{model:this.modelName,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:this.stop,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,t,r){let a=Array.isArray(t)?t:t?.stop,s=Array.isArray(t)?{}:t?.options??{},i=te(e,this.batchSize),o=[],u={};if(this.stop&&a)throw new Error("Stop found in input and default params");let c=this.invocationParams();if(c.stop=a??c.stop,c.max_tokens===-1){if(e.length!==1)throw new Error("max_tokens set to -1 not supported for multiple inputs");c.max_tokens=await Me({prompt:e[0],modelName:this.modelName})}for(let h=0;h<i.length;h+=1){let m=c.stream?await new Promise((g,$)=>{let x={},v,w=!1;this.completionWithRetry({...c,prompt:i[h]},{...s,responseType:"stream",onmessage:_=>{if(_.data?.trim?.()==="[DONE]")g({...v,choices:[x]});else{let T=JSON.parse(_.data);v||(v={id:T.id,object:T.object,created:T.created,model:T.model});let M=T.choices[0];M!=null&&(x.text=(x.text??"")+(M.text??""),x.finish_reason=M.finish_reason,x.logprobs=M.logprobs,r?.handleLLMNewToken(M.text??""))}}}).catch(_=>{w||(w=!0,$(_))})}):await this.completionWithRetry({...c,prompt:i[h]},s);o.push(...m.choices);let{completion_tokens:f,prompt_tokens:d,total_tokens:b}=m.usage??{};f&&(u.completionTokens=(u.completionTokens??0)+f),d&&(u.promptTokens=(u.promptTokens??0)+d),b&&(u.totalTokens=(u.totalTokens??0)+b)}return{generations:te(o,this.n).map(h=>h.map(m=>({text:m.text??"",generationInfo:{finishReason:m.finish_reason,logprobs:m.logprobs}}))),llmOutput:{tokenUsage:u}}}async completionWithRetry(e,t){if(!this.client){let r=new wt({...this.clientConfig,baseOptions:{timeout:this.timeout,adapter:k,...this.clientConfig.baseOptions}});this.client=new _t(r)}return this.caller.call(this.client.createCompletion.bind(this.client),e,t).then(r=>r.data)}_llmType(){return"openai"}},ye=class extends ee{constructor(e){if(super(e),Object.defineProperty(this,"promptLayerApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"plTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.plTags=e?.plTags??[],this.promptLayerApiKey=e?.promptLayerApiKey??(typeof __Process$<"u"?__Process$.env?.PROMPTLAYER_API_KEY:void 0),!this.promptLayerApiKey)throw new Error("Missing PromptLayer API key")}async completionWithRetry(e,t){if(e.stream)return super.completionWithRetry(e,t);let r=Date.now(),a=await super.completionWithRetry(e),s=Date.now();return await this.caller.call(fetch,"https://api.promptlayer.com/track-request",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({function_name:"openai.Completion.create",args:[],kwargs:{engine:e.model,prompt:e.prompt},tags:this.plTags??[],request_response:a,request_start_time:Math.floor(r/1e3),request_end_time:Math.floor(s/1e3),api_key:this.promptLayerApiKey})}),a}}});be();export{ee as OpenAI,N as OpenAIChat,ye as PromptLayerOpenAI};
//# sourceMappingURL=openai.js.map