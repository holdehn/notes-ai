/* esm.sh - esbuild bundle(busboy@1.6.0) deno production */
import __Process$ from "https://deno.land/std@0.177.0/node/process.ts";import  { Buffer as __Buffer$ } from "https://deno.land/std@0.177.0/node/buffer.ts";import * as _1$ from "/v120/streamsearch@1.1.0/deno/streamsearch.mjs";const __1$ = _1$.default??_1$;import __2$ from "https://deno.land/std@0.177.0/node/stream.ts";var P1=Object.create;var O=Object.defineProperty;var T1=Object.getOwnPropertyDescriptor;var v1=Object.getOwnPropertyNames;var E1=Object.getPrototypeOf,L1=Object.prototype.hasOwnProperty;var F=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,i)=>(typeof require<"u"?require:e)[i]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var U=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),A1=(t,e)=>{for(var i in e)O(t,i,{get:e[i],enumerable:!0})},W=(t,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of v1(e))!L1.call(t,r)&&r!==i&&O(t,r,{get:()=>e[r],enumerable:!(s=T1(e,r))||s.enumerable});return t},P=(t,e,i)=>(W(t,e,"default"),i&&W(i,e,"default")),s1=(t,e,i)=>(i=t!=null?P1(E1(t)):{},W(e||!t||!t.__esModule?O(i,"default",{value:t,enumerable:!0}):i,t));var V=U((o1,h1)=>{"use strict";function x1(t){if(t.length===0)return;let e=Object.create(null),i=0;for(;i<t.length;++i){let a=t.charCodeAt(i);if(S[a]!==1){if(a!==47||i===0)return;break}}if(i===t.length)return;let s=t.slice(0,i).toLowerCase(),r=++i;for(;i<t.length;++i){let a=t.charCodeAt(i);if(S[a]!==1){if(i===r||M1(t,i,e)===void 0)return;break}}if(i===r)return;let n=t.slice(r,i).toLowerCase();return{type:s,subtype:n,params:e}}function M1(t,e,i){for(;e<t.length;){for(;e<t.length;++e){let l=t.charCodeAt(e);if(l!==32&&l!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let l=t.charCodeAt(e);if(l!==32&&l!==9)break}if(e===t.length)return;let s,r=e;for(;e<t.length;++e){let l=t.charCodeAt(e);if(S[l]!==1){if(l!==61)return;break}}if(e===t.length||(s=t.slice(r,e),++e,e===t.length))return;let n="",a;if(t.charCodeAt(e)===34){a=++e;let l=!1;for(;e<t.length;++e){let c=t.charCodeAt(e);if(c===92){l?(a=e,l=!1):(n+=t.slice(a,e),l=!0);continue}if(c===34){if(l){a=e,l=!1;continue}n+=t.slice(a,e);break}if(l&&(a=e-1,l=!1),f1[c]!==1)return}if(e===t.length)return;++e}else{for(a=e;e<t.length;++e){let l=t.charCodeAt(e);if(S[l]!==1){if(e===a)return;break}}n=t.slice(a,e)}s=s.toLowerCase(),i[s]===void 0&&(i[s]=n)}return i}function K1(t,e){if(t.length===0)return;let i=Object.create(null),s=0;for(;s<t.length;++s){let n=t.charCodeAt(s);if(S[n]!==1){if(D1(t,s,i,e)===void 0)return;break}}return{type:t.slice(0,s).toLowerCase(),params:i}}function D1(t,e,i,s){for(;e<t.length;){for(;e<t.length;++e){let h=t.charCodeAt(e);if(h!==32&&h!==9)break}if(e===t.length)break;if(t.charCodeAt(e++)!==59)return;for(;e<t.length;++e){let h=t.charCodeAt(e);if(h!==32&&h!==9)break}if(e===t.length)return;let r,n=e;for(;e<t.length;++e){let h=t.charCodeAt(e);if(S[h]!==1){if(h===61)break;return}}if(e===t.length)return;let a="",l,c;if(r=t.slice(n,e),r.charCodeAt(r.length-1)===42){let h=++e;for(;e<t.length;++e){let b=t.charCodeAt(e);if(U1[b]!==1){if(b!==39)return;break}}if(e===t.length)return;for(c=t.slice(h,e),++e;e<t.length&&t.charCodeAt(e)!==39;++e);if(e===t.length||(++e,e===t.length))return;l=e;let _=0;for(;e<t.length;++e){let b=t.charCodeAt(e);if(V1[b]!==1){if(b===37){let x,v;if(e+2<t.length&&(x=n1[t.charCodeAt(e+1)])!==-1&&(v=n1[t.charCodeAt(e+2)])!==-1){let E=(x<<4)+v;a+=t.slice(l,e),a+=String.fromCharCode(E),e+=2,l=e+1,E>=128?_=2:_===0&&(_=1);continue}return}break}}if(a+=t.slice(l,e),a=l1(a,c,_),a===void 0)return}else{if(++e,e===t.length)return;if(t.charCodeAt(e)===34){l=++e;let h=!1;for(;e<t.length;++e){let _=t.charCodeAt(e);if(_===92){h?(l=e,h=!1):(a+=t.slice(l,e),h=!0);continue}if(_===34){if(h){l=e,h=!1;continue}a+=t.slice(l,e);break}if(h&&(l=e-1,h=!1),f1[_]!==1)return}if(e===t.length)return;++e}else{for(l=e;e<t.length;++e){let h=t.charCodeAt(e);if(S[h]!==1){if(e===l)return;break}}a=t.slice(l,e)}if(a=s(a,2),a===void 0)return}r=r.toLowerCase(),i[r]===void 0&&(i[r]=a)}return i}function a1(t){let e;for(;;)switch(t){case"utf-8":case"utf8":return A.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return A.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return A.utf16le;case"base64":return A.base64;default:if(e===void 0){e=!0,t=t.toLowerCase();continue}return A.other.bind(t)}}var A={utf8:(t,e)=>{if(t.length===0)return"";if(typeof t=="string"){if(e<2)return t;t=__Buffer$.from(t,"latin1")}return t.utf8Slice(0,t.length)},latin1:(t,e)=>t.length===0?"":typeof t=="string"?t:t.latin1Slice(0,t.length),utf16le:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=__Buffer$.from(t,"latin1")),t.ucs2Slice(0,t.length)),base64:(t,e)=>t.length===0?"":(typeof t=="string"&&(t=__Buffer$.from(t,"latin1")),t.base64Slice(0,t.length)),other:(t,e)=>{if(t.length===0)return"";typeof t=="string"&&(t=__Buffer$.from(t,"latin1"));try{return new TextDecoder(o1).decode(t)}catch{}}};function l1(t,e,i){let s=a1(e);if(s)return s(t,i)}function B1(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;--e)switch(t.charCodeAt(e)){case 47:case 92:return t=t.slice(e+1),t===".."||t==="."?"":t}return t===".."||t==="."?"":t}var S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f1=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],U1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],V1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n1=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];h1.exports={basename:B1,convertToUTF8:l1,getDecoder:a1,parseContentType:x1,parseDisposition:K1}});var C1=U((le,p1)=>{"use strict";var{Readable:z1,Writable:H1}=__2$,R1=__1$,{basename:W1,convertToUTF8:c1,getDecoder:O1,parseContentType:F1,parseDisposition:I1}=V(),N1=__Buffer$.from(`\r
`),q1=__Buffer$.from("\r"),j1=__Buffer$.from("-");function u1(){}var X1=2e3,T=16*1024,z=0,d1=1,_1=2,I=class{constructor(e){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=z,this.name="",this.value="",this.crlf=0,this.cb=e}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=z,this.name="",this.value="",this.crlf=0}push(e,i,s){let r=i;for(;i<s;)switch(this.state){case z:{let n=!1;for(;i<s;++i){if(this.byteCount===T)return-1;++this.byteCount;let a=e[i];if(Y1[a]!==1){if(a!==58||(this.name+=e.latin1Slice(r,i),this.name.length===0))return-1;++i,n=!0,this.state=d1;break}}if(!n){this.name+=e.latin1Slice(r,i);break}}case d1:{let n=!1;for(;i<s;++i){if(this.byteCount===T)return-1;++this.byteCount;let a=e[i];if(a!==32&&a!==9){r=i,n=!0,this.state=_1;break}}if(!n)break}case _1:switch(this.crlf){case 0:for(;i<s;++i){if(this.byteCount===T)return-1;++this.byteCount;let n=e[i];if(Z1[n]!==1){if(n!==13)return-1;++this.crlf;break}}this.value+=e.latin1Slice(r,i++);break;case 1:if(this.byteCount===T||(++this.byteCount,e[i++]!==10))return-1;++this.crlf;break;case 2:{if(this.byteCount===T)return-1;++this.byteCount;let n=e[i];n===32||n===9?(r=i,this.crlf=0):(++this.pairCount<X1&&(this.name=this.name.toLowerCase(),this.header[this.name]===void 0?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),n===13?(++this.crlf,++i):(r=i,this.crlf=0,this.state=z,this.name="",this.value=""));break}case 3:{if(this.byteCount===T||(++this.byteCount,e[i++]!==10))return-1;let n=this.header;return this.reset(),this.cb(n),i}}break}return i}},N=class extends z1{constructor(e,i){super(e),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),--i._fileEndsLeft===0&&i._finalcb){let s=i._finalcb;i._finalcb=null,__Process$.nextTick(s)}})}_read(e){let i=this._readcb;i&&(this._readcb=null,i())}},m1={push:(t,e)=>{},destroy:()=>{}};function $1(t,e){let i=t._writecb;t._writecb=null,e?t.destroy(e):i&&i()}function Q1(t,e){return t}var q=class extends H1{constructor(e){let i={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};if(super(i),!e.conType.params||typeof e.conType.params.boundary!="string")throw new Error("Multipart: Boundary not found");let s=e.conType.params.boundary,r=typeof e.defParamCharset=="string"&&e.defParamCharset?O1(e.defParamCharset):Q1,n=e.defCharset||"utf8",a=e.preservePath,l={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.fileHwm=="number"?e.fileHwm:void 0},c=e.limits,h=c&&typeof c.fieldSize=="number"?c.fieldSize:1*1024*1024,_=c&&typeof c.fileSize=="number"?c.fileSize:1/0,b=c&&typeof c.files=="number"?c.files:1/0,x=c&&typeof c.fields=="number"?c.fields:1/0,v=c&&typeof c.parts=="number"?c.parts:1/0,E=-1,G=0,J=0,m=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let M=0,p,k=0,K,D,L,B,H=!1,e1=!1,t1=!1;this._hparser=null;let i1=new I(C=>{this._hparser=null,m=!1,L="text/plain",K=n,D="7bit",B=void 0,H=!1;let u;if(!C["content-disposition"]){m=!0;return}let f=I1(C["content-disposition"][0],r);if(!f||f.type!=="form-data"){m=!0;return}if(f.params&&(f.params.name&&(B=f.params.name),f.params["filename*"]?u=f.params["filename*"]:f.params.filename&&(u=f.params.filename),u!==void 0&&!a&&(u=W1(u))),C["content-type"]){let d=F1(C["content-type"][0]);d&&(L=`${d.type}/${d.subtype}`,d.params&&typeof d.params.charset=="string"&&(K=d.params.charset.toLowerCase()))}if(C["content-transfer-encoding"]&&(D=C["content-transfer-encoding"][0].toLowerCase()),L==="application/octet-stream"||u!==void 0){if(J===b){e1||(e1=!0,this.emit("filesLimit")),m=!0;return}if(++J,this.listenerCount("file")===0){m=!0;return}M=0,this._fileStream=new N(l,this),++this._fileEndsLeft,this.emit("file",B,this._fileStream,{filename:u,encoding:D,mimeType:L})}else{if(G===x){t1||(t1=!0,this.emit("fieldsLimit")),m=!0;return}if(++G,this.listenerCount("field")===0){m=!0;return}p=[],k=0}}),y=0,R=(C,u,f,d,r1)=>{e:for(;u;){if(this._hparser!==null){let o=this._hparser.push(u,f,d);if(o===-1){this._hparser=null,i1.reset(),this.emit("error",new Error("Malformed part header"));break}f=o}if(f===d)break;if(y!==0){if(y===1){switch(u[f]){case 45:y=2,++f;break;case 13:y=3,++f;break;default:y=0}if(f===d)return}if(y===2){if(y=0,u[f]===45){this._complete=!0,this._bparser=m1;return}let o=this._writecb;this._writecb=u1,R(!1,j1,0,1,!1),this._writecb=o}else if(y===3)if(y=0,u[f]===10){if(++f,E>=v||(this._hparser=i1,f===d))break;continue e}else{let o=this._writecb;this._writecb=u1,R(!1,q1,0,1,!1),this._writecb=o}}if(!m){if(this._fileStream){let o,w=Math.min(d-f,_-M);r1?o=u.slice(f,f+w):(o=__Buffer$.allocUnsafe(w),u.copy(o,0,f,f+w)),M+=o.length,M===_?(o.length>0&&this._fileStream.push(o),this._fileStream.emit("limit"),this._fileStream.truncated=!0,m=!0):this._fileStream.push(o)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(p!==void 0){let o,w=Math.min(d-f,h-k);r1?o=u.slice(f,f+w):(o=__Buffer$.allocUnsafe(w),u.copy(o,0,f,f+w)),k+=w,p.push(o),k===h&&(m=!0,H=!0)}}break}if(C){if(y=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(p!==void 0){let o;switch(p.length){case 0:o="";break;case 1:o=c1(p[0],K,0);break;default:o=c1(__Buffer$.concat(p,k),K,0)}p=void 0,k=0,this.emit("field",B,o,{nameTruncated:!1,valueTruncated:H,encoding:D,mimeType:L})}++E===v&&this.emit("partsLimit")}};this._bparser=new R1(`\r
--${s}`,R),this._writecb=null,this._finalcb=null,this.write(N1)}static detect(e){return e.type==="multipart"&&e.subtype==="form-data"}_write(e,i,s){this._writecb=s,this._bparser.push(e,0),this._writecb&&$1(this)}_destroy(e,i){this._hparser=null,this._bparser=m1,e||(e=b1(this));let s=this._fileStream;s&&(this._fileStream=null,s.destroy(e)),i(e)}_final(e){if(this._bparser.destroy(),!this._complete)return e(new Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=y1.bind(null,this,e):y1(this,e)}};function y1(t,e,i){if(i)return e(i);i=b1(t),e(i)}function b1(t){if(t._hparser)return new Error("Malformed part header");let e=t._fileStream;if(e&&(t._fileStream=null,e.destroy(new Error("Unexpected end of file"))),!t._complete)return new Error("Unexpected end of form")}var Y1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Z1=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];p1.exports=q});var S1=U((fe,w1)=>{"use strict";var{Writable:G1}=__2$,{getDecoder:J1}=V(),Y=class extends G1{constructor(e){let i={autoDestroy:!0,emitClose:!0,highWaterMark:typeof e.highWaterMark=="number"?e.highWaterMark:void 0};super(i);let s=e.defCharset||"utf8";e.conType.params&&typeof e.conType.params.charset=="string"&&(s=e.conType.params.charset),this.charset=s;let r=e.limits;this.fieldSizeLimit=r&&typeof r.fieldSize=="number"?r.fieldSize:1*1024*1024,this.fieldsLimit=r&&typeof r.fields=="number"?r.fields:1/0,this.fieldNameSizeLimit=r&&typeof r.fieldNameSize=="number"?r.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=J1(s)}static detect(e){return e.type==="application"&&e.subtype==="x-www-form-urlencoded"}_write(e,i,s){if(this._fields>=this.fieldsLimit)return s();let r=0,n=e.length;if(this._lastPos=0,this._byte!==-2){if(r=j(this,e,r,n),r===-1)return s(new Error("Malformed urlencoded form"));if(r>=n)return s();this._inKey?++this._bytesKey:++this._bytesVal}e:for(;r<n;)if(this._inKey){for(r=X(this,e,r,n);r<n;){switch(e[r]){case 61:this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._lastPos=++r,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue e;case 38:if(this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._lastPos=++r,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),s();continue;case 43:this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._key+=" ",this._lastPos=r+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r)),this._lastPos=r+1,this._byte=-1,r=j(this,e,r+1,n),r===-1)return s(new Error("Malformed urlencoded form"));if(r>=n)return s();++this._bytesKey,r=X(this,e,r,n);continue}++r,++this._bytesKey,r=X(this,e,r,n)}this._lastPos<r&&(this._key+=e.latin1Slice(this._lastPos,r))}else{for(r=$(this,e,r,n);r<n;){switch(e[r]){case 38:if(this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r)),this._lastPos=++r,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),s();continue e;case 43:this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r)),this._val+=" ",this._lastPos=r+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r)),this._lastPos=r+1,this._byte=-1,r=j(this,e,r+1,n),r===-1)return s(new Error("Malformed urlencoded form"));if(r>=n)return s();++this._bytesVal,r=$(this,e,r,n);continue}++r,++this._bytesVal,r=$(this,e,r,n)}this._lastPos<r&&(this._val+=e.latin1Slice(this._lastPos,r))}s()}_final(e){if(this._byte!==-2)return e(new Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),e()}};function j(t,e,i,s){if(i>=s)return s;if(t._byte===-1){let r=Q[e[i++]];if(r===-1)return-1;if(r>=8&&(t._encode=2),i<s){let n=Q[e[i++]];if(n===-1)return-1;t._inKey?t._key+=String.fromCharCode((r<<4)+n):t._val+=String.fromCharCode((r<<4)+n),t._byte=-2,t._lastPos=i}else t._byte=r}else{let r=Q[e[i++]];if(r===-1)return-1;t._inKey?t._key+=String.fromCharCode((t._byte<<4)+r):t._val+=String.fromCharCode((t._byte<<4)+r),t._byte=-2,t._lastPos=i}return i}function X(t,e,i,s){if(t._bytesKey>t.fieldNameSizeLimit){for(t._keyTrunc||t._lastPos<i&&(t._key+=e.latin1Slice(t._lastPos,i-1)),t._keyTrunc=!0;i<s;++i){let r=e[i];if(r===61||r===38)break;++t._bytesKey}t._lastPos=i}return i}function $(t,e,i,s){if(t._bytesVal>t.fieldSizeLimit){for(t._valTrunc||t._lastPos<i&&(t._val+=e.latin1Slice(t._lastPos,i-1)),t._valTrunc=!0;i<s&&e[i]!==38;++i)++t._bytesVal;t._lastPos=i}return i}var Q=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];w1.exports=Y});var Z=U((oe,g1)=>{"use strict";var{parseContentType:ee}=V();function te(t){let e=t.headers,i=ee(e["content-type"]);if(!i)throw new Error("Malformed content type");for(let s of ie){if(!s.detect(i))continue;let n={limits:t.limits,headers:e,conType:i,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return t.highWaterMark&&(n.highWaterMark=t.highWaterMark),t.fileHwm&&(n.fileHwm=t.fileHwm),n.defCharset=t.defCharset,n.defParamCharset=t.defParamCharset,n.preservePath=t.preservePath,new s(n)}throw new Error(`Unsupported content type: ${e["content-type"]}`)}var ie=[C1(),S1()].filter(function(t){return typeof t.detect=="function"});g1.exports=t=>{if((typeof t!="object"||t===null)&&(t={}),typeof t.headers!="object"||t.headers===null||typeof t.headers["content-type"]!="string")throw new Error("Missing Content-Type");return te(t)}});var g={};A1(g,{default:()=>ne});var re=s1(Z());P(g,s1(Z()));var{default:k1,...se}=re,ne=k1!==void 0?k1:se;export{ne as default};
//# sourceMappingURL=busboy.mjs.map