/* esm.sh - esbuild bundle(chromadb@1.5.2) deno production */
import * as _1$ from "/v124/openai@3.2.1/deno/openai.mjs";const __1$ = _1$.default??_1$;import * as _2$ from "/v124/cohere-ai@6.2.1/deno/cohere-ai.mjs";const __2$ = _2$.default??_2$;var x=(c=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(c,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):c)(function(c){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+c+'" is not supported')});var u=fetch,h="";var b=class{constructor(e,t=h,r=u){this.basePath=t,this.fetch=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}},d=class extends Error{constructor(e,t){super(t),this.field=e,Object.setPrototypeOf(this,d.prototype),this.name="RequiredError"}};var f=function(c){return{add(e,t,r={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling add.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling add.");let n="/api/v1/collections/{collection_id}/add".replace("{collection_id}",encodeURIComponent(String(e))),o=n.indexOf("?"),a=Object.assign({method:"POST"},r),i=r.headers?new Headers(r.headers):new Headers,s=new URLSearchParams(o!==-1?n.substring(o+1):"");o!==-1&&(n=n.substring(0,o)),i.set("Content-Type","application/json"),a.headers=i,t!==void 0&&(a.body=JSON.stringify(t||{}));let l=s.toString();return l&&(n+="?"+l),{url:n,options:a}},aDelete(e,t,r={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling aDelete.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling aDelete.");let n="/api/v1/collections/{collection_id}/delete".replace("{collection_id}",encodeURIComponent(String(e))),o=n.indexOf("?"),a=Object.assign({method:"POST"},r),i=r.headers?new Headers(r.headers):new Headers,s=new URLSearchParams(o!==-1?n.substring(o+1):"");o!==-1&&(n=n.substring(0,o)),i.set("Content-Type","application/json"),a.headers=i,t!==void 0&&(a.body=JSON.stringify(t||{}));let l=s.toString();return l&&(n+="?"+l),{url:n,options:a}},aGet(e,t,r={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling aGet.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling aGet.");let n="/api/v1/collections/{collection_id}/get".replace("{collection_id}",encodeURIComponent(String(e))),o=n.indexOf("?"),a=Object.assign({method:"POST"},r),i=r.headers?new Headers(r.headers):new Headers,s=new URLSearchParams(o!==-1?n.substring(o+1):"");o!==-1&&(n=n.substring(0,o)),i.set("Content-Type","application/json"),a.headers=i,t!==void 0&&(a.body=JSON.stringify(t||{}));let l=s.toString();return l&&(n+="?"+l),{url:n,options:a}},count(e,t={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling count.");let r="/api/v1/collections/{collection_id}/count".replace("{collection_id}",encodeURIComponent(String(e))),n=r.indexOf("?"),o=Object.assign({method:"GET"},t),a=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(n!==-1?r.substring(n+1):"");n!==-1&&(r=r.substring(0,n)),o.headers=a;let s=i.toString();return s&&(r+="?"+s),{url:r,options:o}},createCollection(e,t={}){if(e==null)throw new d("request","Required parameter request was null or undefined when calling createCollection.");let r="/api/v1/collections",n=r.indexOf("?"),o=Object.assign({method:"POST"},t),a=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(n!==-1?r.substring(n+1):"");n!==-1&&(r=r.substring(0,n)),a.set("Content-Type","application/json"),o.headers=a,e!==void 0&&(o.body=JSON.stringify(e||{}));let s=i.toString();return s&&(r+="?"+s),{url:r,options:o}},createIndex(e,t={}){if(e==null)throw new d("collectionName","Required parameter collectionName was null or undefined when calling createIndex.");let r="/api/v1/collections/{collection_name}/create_index".replace("{collection_name}",encodeURIComponent(String(e))),n=r.indexOf("?"),o=Object.assign({method:"POST"},t),a=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(n!==-1?r.substring(n+1):"");n!==-1&&(r=r.substring(0,n)),o.headers=a;let s=i.toString();return s&&(r+="?"+s),{url:r,options:o}},deleteCollection(e,t={}){if(e==null)throw new d("collectionName","Required parameter collectionName was null or undefined when calling deleteCollection.");let r="/api/v1/collections/{collection_name}".replace("{collection_name}",encodeURIComponent(String(e))),n=r.indexOf("?"),o=Object.assign({method:"DELETE"},t),a=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(n!==-1?r.substring(n+1):"");n!==-1&&(r=r.substring(0,n)),o.headers=a;let s=i.toString();return s&&(r+="?"+s),{url:r,options:o}},getCollection(e,t={}){if(e==null)throw new d("collectionName","Required parameter collectionName was null or undefined when calling getCollection.");let r="/api/v1/collections/{collection_name}".replace("{collection_name}",encodeURIComponent(String(e))),n=r.indexOf("?"),o=Object.assign({method:"GET"},t),a=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(n!==-1?r.substring(n+1):"");n!==-1&&(r=r.substring(0,n)),o.headers=a;let s=i.toString();return s&&(r+="?"+s),{url:r,options:o}},getNearestNeighbors(e,t,r={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling getNearestNeighbors.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling getNearestNeighbors.");let n="/api/v1/collections/{collection_id}/query".replace("{collection_id}",encodeURIComponent(String(e))),o=n.indexOf("?"),a=Object.assign({method:"POST"},r),i=r.headers?new Headers(r.headers):new Headers,s=new URLSearchParams(o!==-1?n.substring(o+1):"");o!==-1&&(n=n.substring(0,o)),i.set("Content-Type","application/json"),a.headers=i,t!==void 0&&(a.body=JSON.stringify(t||{}));let l=s.toString();return l&&(n+="?"+l),{url:n,options:a}},heartbeat(e={}){let t="/api/v1/heartbeat",r=t.indexOf("?"),n=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,a=new URLSearchParams(r!==-1?t.substring(r+1):"");r!==-1&&(t=t.substring(0,r)),n.headers=o;let i=a.toString();return i&&(t+="?"+i),{url:t,options:n}},listCollections(e={}){let t="/api/v1/collections",r=t.indexOf("?"),n=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,a=new URLSearchParams(r!==-1?t.substring(r+1):"");r!==-1&&(t=t.substring(0,r)),n.headers=o;let i=a.toString();return i&&(t+="?"+i),{url:t,options:n}},persist(e={}){let t="/api/v1/persist",r=t.indexOf("?"),n=Object.assign({method:"POST"},e),o=e.headers?new Headers(e.headers):new Headers,a=new URLSearchParams(r!==-1?t.substring(r+1):"");r!==-1&&(t=t.substring(0,r)),n.headers=o;let i=a.toString();return i&&(t+="?"+i),{url:t,options:n}},rawSql(e,t={}){if(e==null)throw new d("request","Required parameter request was null or undefined when calling rawSql.");let r="/api/v1/raw_sql",n=r.indexOf("?"),o=Object.assign({method:"POST"},t),a=t.headers?new Headers(t.headers):new Headers,i=new URLSearchParams(n!==-1?r.substring(n+1):"");n!==-1&&(r=r.substring(0,n)),a.set("Content-Type","application/json"),o.headers=a,e!==void 0&&(o.body=JSON.stringify(e||{}));let s=i.toString();return s&&(r+="?"+s),{url:r,options:o}},reset(e={}){let t="/api/v1/reset",r=t.indexOf("?"),n=Object.assign({method:"POST"},e),o=e.headers?new Headers(e.headers):new Headers,a=new URLSearchParams(r!==-1?t.substring(r+1):"");r!==-1&&(t=t.substring(0,r)),n.headers=o;let i=a.toString();return i&&(t+="?"+i),{url:t,options:n}},root(e={}){let t="/api/v1",r=t.indexOf("?"),n=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,a=new URLSearchParams(r!==-1?t.substring(r+1):"");r!==-1&&(t=t.substring(0,r)),n.headers=o;let i=a.toString();return i&&(t+="?"+i),{url:t,options:n}},update(e,t,r={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling update.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling update.");let n="/api/v1/collections/{collection_id}/update".replace("{collection_id}",encodeURIComponent(String(e))),o=n.indexOf("?"),a=Object.assign({method:"POST"},r),i=r.headers?new Headers(r.headers):new Headers,s=new URLSearchParams(o!==-1?n.substring(o+1):"");o!==-1&&(n=n.substring(0,o)),i.set("Content-Type","application/json"),a.headers=i,t!==void 0&&(a.body=JSON.stringify(t||{}));let l=s.toString();return l&&(n+="?"+l),{url:n,options:a}},updateCollection(e,t,r={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling updateCollection.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling updateCollection.");let n="/api/v1/collections/{collection_id}".replace("{collection_id}",encodeURIComponent(String(e))),o=n.indexOf("?"),a=Object.assign({method:"PUT"},r),i=r.headers?new Headers(r.headers):new Headers,s=new URLSearchParams(o!==-1?n.substring(o+1):"");o!==-1&&(n=n.substring(0,o)),i.set("Content-Type","application/json"),a.headers=i,t!==void 0&&(a.body=JSON.stringify(t||{}));let l=s.toString();return l&&(n+="?"+l),{url:n,options:a}},upsert(e,t,r={}){if(e==null)throw new d("collectionId","Required parameter collectionId was null or undefined when calling upsert.");if(t==null)throw new d("request","Required parameter request was null or undefined when calling upsert.");let n="/api/v1/collections/{collection_id}/upsert".replace("{collection_id}",encodeURIComponent(String(e))),o=n.indexOf("?"),a=Object.assign({method:"POST"},r),i=r.headers?new Headers(r.headers):new Headers,s=new URLSearchParams(o!==-1?n.substring(o+1):"");o!==-1&&(n=n.substring(0,o)),i.set("Content-Type","application/json"),a.headers=i,t!==void 0&&(a.body=JSON.stringify(t||{}));let l=s.toString();return l&&(n+="?"+l),{url:n,options:a}},version(e={}){let t="/api/v1/version",r=t.indexOf("?"),n=Object.assign({method:"GET"},e),o=e.headers?new Headers(e.headers):new Headers,a=new URLSearchParams(r!==-1?t.substring(r+1):"");r!==-1&&(t=t.substring(0,r)),n.headers=o;let i=a.toString();return i&&(t+="?"+i),{url:t,options:n}}}},w=function(c){return{add(e,t,r){let n=f(c).add(e,t,r);return(o=u,a=h)=>o(a+n.url,n.options).then(i=>{let s=i.headers.get("Content-Type"),l=s?s.replace(/;.*/,""):void 0;if(i.status===201){if(l==="application/json")return i.json();throw i}throw i.status===422,i})},aDelete(e,t,r){let n=f(c).aDelete(e,t,r);return(o=u,a=h)=>o(a+n.url,n.options).then(i=>{let s=i.headers.get("Content-Type"),l=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(l==="application/json")return i.json();throw i}throw i.status===422,i})},aGet(e,t,r){let n=f(c).aGet(e,t,r);return(o=u,a=h)=>o(a+n.url,n.options).then(i=>{let s=i.headers.get("Content-Type"),l=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(l==="application/json")return i.json();throw i}throw i.status===422,i})},count(e,t){let r=f(c).count(e,t);return(n=u,o=h)=>n(o+r.url,r.options).then(a=>{let i=a.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(a.status===200){if(s==="application/json")return a.json();throw a}throw a.status===422,a})},createCollection(e,t){let r=f(c).createCollection(e,t);return(n=u,o=h)=>n(o+r.url,r.options).then(a=>{let i=a.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(a.status===200){if(s==="application/json")return a.json();throw a}throw a.status===422,a})},createIndex(e,t){let r=f(c).createIndex(e,t);return(n=u,o=h)=>n(o+r.url,r.options).then(a=>{let i=a.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(a.status===200){if(s==="application/json")return a.json();throw a}throw a.status===422,a})},deleteCollection(e,t){let r=f(c).deleteCollection(e,t);return(n=u,o=h)=>n(o+r.url,r.options).then(a=>{let i=a.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(a.status===200){if(s==="application/json")return a.json();throw a}throw a.status===422,a})},getCollection(e,t){let r=f(c).getCollection(e,t);return(n=u,o=h)=>n(o+r.url,r.options).then(a=>{let i=a.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(a.status===200){if(s==="application/json")return a.json();throw a}throw a.status===422,a})},getNearestNeighbors(e,t,r){let n=f(c).getNearestNeighbors(e,t,r);return(o=u,a=h)=>o(a+n.url,n.options).then(i=>{let s=i.headers.get("Content-Type"),l=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(l==="application/json")return i.json();throw i}throw i.status===422,i})},heartbeat(e){let t=f(c).heartbeat(e);return(r=u,n=h)=>r(n+t.url,t.options).then(o=>{let a=o.headers.get("Content-Type"),i=a?a.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},listCollections(e){let t=f(c).listCollections(e);return(r=u,n=h)=>r(n+t.url,t.options).then(o=>{let a=o.headers.get("Content-Type"),i=a?a.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},persist(e){let t=f(c).persist(e);return(r=u,n=h)=>r(n+t.url,t.options).then(o=>{let a=o.headers.get("Content-Type"),i=a?a.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},rawSql(e,t){let r=f(c).rawSql(e,t);return(n=u,o=h)=>n(o+r.url,r.options).then(a=>{let i=a.headers.get("Content-Type"),s=i?i.replace(/;.*/,""):void 0;if(a.status===200){if(s==="application/json")return a.json();throw a}throw a.status===422,a})},reset(e){let t=f(c).reset(e);return(r=u,n=h)=>r(n+t.url,t.options).then(o=>{let a=o.headers.get("Content-Type"),i=a?a.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},root(e){let t=f(c).root(e);return(r=u,n=h)=>r(n+t.url,t.options).then(o=>{let a=o.headers.get("Content-Type"),i=a?a.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})},update(e,t,r){let n=f(c).update(e,t,r);return(o=u,a=h)=>o(a+n.url,n.options).then(i=>{let s=i.headers.get("Content-Type"),l=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(l==="application/json")return i.json();throw i}throw i.status===422,i})},updateCollection(e,t,r){let n=f(c).updateCollection(e,t,r);return(o=u,a=h)=>o(a+n.url,n.options).then(i=>{let s=i.headers.get("Content-Type"),l=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(l==="application/json")return i.json();throw i}throw i.status===422,i})},upsert(e,t,r){let n=f(c).upsert(e,t,r);return(o=u,a=h)=>o(a+n.url,n.options).then(i=>{let s=i.headers.get("Content-Type"),l=s?s.replace(/;.*/,""):void 0;if(i.status===200){if(l==="application/json")return i.json();throw i}throw i.status===422,i})},version(e){let t=f(c).version(e);return(r=u,n=h)=>r(n+t.url,t.options).then(o=>{let a=o.headers.get("Content-Type"),i=a?a.replace(/;.*/,""):void 0;if(o.status===200){if(i==="application/json")return o.json();throw o}throw o})}}};var V=class extends b{add(e,t,r){return w(this.configuration).add(e,t,r)(this.fetch,this.basePath)}aDelete(e,t,r){return w(this.configuration).aDelete(e,t,r)(this.fetch,this.basePath)}aGet(e,t,r){return w(this.configuration).aGet(e,t,r)(this.fetch,this.basePath)}count(e,t){return w(this.configuration).count(e,t)(this.fetch,this.basePath)}createCollection(e,t){return w(this.configuration).createCollection(e,t)(this.fetch,this.basePath)}createIndex(e,t){return w(this.configuration).createIndex(e,t)(this.fetch,this.basePath)}deleteCollection(e,t){return w(this.configuration).deleteCollection(e,t)(this.fetch,this.basePath)}getCollection(e,t){return w(this.configuration).getCollection(e,t)(this.fetch,this.basePath)}getNearestNeighbors(e,t,r){return w(this.configuration).getNearestNeighbors(e,t,r)(this.fetch,this.basePath)}heartbeat(e){return w(this.configuration).heartbeat(e)(this.fetch,this.basePath)}listCollections(e){return w(this.configuration).listCollections(e)(this.fetch,this.basePath)}persist(e){return w(this.configuration).persist(e)(this.fetch,this.basePath)}rawSql(e,t){return w(this.configuration).rawSql(e,t)(this.fetch,this.basePath)}reset(e){return w(this.configuration).reset(e)(this.fetch,this.basePath)}root(e){return w(this.configuration).root(e)(this.fetch,this.basePath)}update(e,t,r){return w(this.configuration).update(e,t,r)(this.fetch,this.basePath)}updateCollection(e,t,r){return w(this.configuration).updateCollection(e,t,r)(this.fetch,this.basePath)}upsert(e,t,r){return w(this.configuration).upsert(e,t,r)(this.fetch,this.basePath)}version(e){return w(this.configuration).version(e)(this.fetch,this.basePath)}};var H;(function(c){let e;(function(r){let n;(function(o){o.Documents="documents",o.Embeddings="embeddings",o.Metadatas="metadatas",o.Distances="distances"})(n=r.IncludeEnum||(r.IncludeEnum={}))})(e=c.GetEmbedding||(c.GetEmbedding={}));let t;(function(r){let n;(function(o){o.Documents="documents",o.Embeddings="embeddings",o.Metadatas="metadatas",o.Distances="distances"})(n=r.IncludeEnum||(r.IncludeEnum={}))})(t=c.QueryEmbedding||(c.QueryEmbedding={}))})(H||(H={}));var S=class{constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.authorization=e.authorization,this.basePath=e.basePath}};function m(c){return Array.isArray(c)?c:[c]}function C(c){return Array.isArray(c[0])?c:[c]}function O(c){return c&&typeof c=="object"?Array.isArray(c)?new Array(...c):Object.assign({},c):c}async function g(c){if(c instanceof Response)try{let e=await c.json();if("error"in e)return{error:e.error}}catch(e){return{error:e&&typeof e=="object"&&"message"in e?e.message:"unknown error"}}return{error:c}}async function p(c){switch(!0){case c instanceof Response:return O(await c.json());case typeof c=="string":return O(c);default:return O(c)}}var P=class{constructor(e,t,r,n,o){this.name=e,this.id=t,this.metadata=n,this.api=r,o!==void 0&&(this.embeddingFunction=o)}setName(e){this.name=e}setMetadata(e){this.metadata=e}async validate(e,t,r,n,o){if(e&&r===void 0&&o===void 0)throw new Error("embeddings and documents cannot both be undefined");if(r===void 0&&o!==void 0){let y=m(o);if(this.embeddingFunction!==void 0)r=await this.embeddingFunction.generate(y);else throw new Error("embeddingFunction is undefined. Please configure an embedding function")}if(r===void 0)throw new Error("embeddings is undefined but shouldnt be");let a=m(t),i=C(r),s;n===void 0?s=void 0:s=m(n);let l;o===void 0?l=void 0:l=m(o);for(let y=0;y<a.length;y+=1)if(typeof a[y]!="string")throw new Error(`Expected ids to be strings, found ${typeof a[y]} at index ${y}`);if(i!==void 0&&a.length!==i.length||s!==void 0&&a.length!==s.length||l!==void 0&&a.length!==l.length)throw new Error("ids, embeddings, metadatas, and documents must all be the same length");if(new Set(a).size!==a.length){let y=a.filter((q,_)=>a.indexOf(q)!==_);throw new Error(`Expected IDs to be unique, found duplicates for: ${y}`)}return[a,i,s,l]}async add({ids:e,embeddings:t,metadatas:r,documents:n}){let[o,a,i,s]=await this.validate(!0,e,t,r,n);return await this.api.add(this.id,{ids:o,embeddings:a,documents:s,metadatas:i}).then(p).catch(g)}async upsert({ids:e,embeddings:t,metadatas:r,documents:n}){let[o,a,i,s]=await this.validate(!0,e,t,r,n);return await this.api.upsert(this.id,{ids:o,embeddings:a,documents:s,metadatas:i}).then(p).catch(g)}async count(){let e=await this.api.count(this.id);return p(e)}async modify({name:e,metadata:t}={}){let r=await this.api.updateCollection(this.id,{new_name:e,new_metadata:t}).then(p).catch(g);return this.setName(e||this.name),this.setMetadata(t||this.metadata),r}async get({ids:e,where:t,limit:r,offset:n,include:o,whereDocument:a}={}){let i;return e!==void 0&&(i=m(e)),await this.api.aGet(this.id,{ids:i,where:t,limit:r,offset:n,include:o,where_document:a}).then(p).catch(g)}async update({ids:e,embeddings:t,metadatas:r,documents:n}){if(t===void 0&&n===void 0&&r===void 0)throw new Error("embeddings, documents, and metadatas cannot all be undefined");if(t===void 0&&n!==void 0){let a=m(n);if(this.embeddingFunction!==void 0)t=await this.embeddingFunction.generate(a);else throw new Error("embeddingFunction is undefined. Please configure an embedding function")}r!==void 0&&(r=m(r)),n!==void 0&&(n=m(n));var o=await this.api.update(this.id,{ids:m(e),embeddings:t?C(t):void 0,documents:n,metadatas:r}).then(p).catch(g);return o}async query({queryEmbeddings:e,nResults:t,where:r,queryTexts:n,whereDocument:o,include:a}){if(t===void 0&&(t=10),e===void 0&&n===void 0)throw new Error("queryEmbeddings and queryTexts cannot both be undefined");if(e===void 0&&n!==void 0){let s=m(n);if(this.embeddingFunction!==void 0)e=await this.embeddingFunction.generate(s);else throw new Error("embeddingFunction is undefined. Please configure an embedding function")}if(e===void 0)throw new Error("embeddings is undefined but shouldnt be");let i=C(e);return await this.api.getNearestNeighbors(this.id,{query_embeddings:i,where:r,n_results:t,where_document:o,include:a}).then(p).catch(g)}async peek({limit:e}={}){e===void 0&&(e=10);let t=await this.api.aGet(this.id,{limit:e});return p(t)}async delete({ids:e,where:t,whereDocument:r}={}){let n;return e!==void 0&&(n=m(e)),await this.api.aDelete(this.id,{ids:n,where:t,where_document:r}).then(p).catch(g)}};var T=class{constructor({path:e}={}){e===void 0&&(e="http://localhost:8000");let t=new S({basePath:e});this.api=new V(t)}async reset(){return await this.api.reset()}async version(){let e=await this.api.version();return await p(e)}async heartbeat(){let e=await this.api.heartbeat();return(await p(e))["nanosecond heartbeat"]}async persist(){throw new Error("Not implemented in JS client")}async createCollection({name:e,metadata:t,embeddingFunction:r}){let n=await this.api.createCollection({name:e,metadata:t}).then(p).catch(g);if(n.error)throw new Error(n.error);return new P(e,n.id,this.api,t,r)}async getOrCreateCollection({name:e,metadata:t,embeddingFunction:r}){let n=await this.api.createCollection({name:e,metadata:t,get_or_create:!0}).then(p).catch(g);if(n.error)throw new Error(n.error);return new P(e,n.id,this.api,n.metadata,r)}async listCollections(){let e=await this.api.listCollections();return p(e)}async getCollection({name:e,embeddingFunction:t}){let r=await this.api.getCollection(e).then(p).catch(g);if(r.error)throw new Error(r.error);return new P(r.name,r.id,this.api,r.metadata,t)}async deleteCollection({name:e}){return await this.api.deleteCollection(e).then(p).catch(g)}};var j,R=class{constructor({openai_api_key:e,openai_model:t,openai_organization_id:r}){try{j=__1$}catch{throw new Error("Please install the openai package to use the OpenAIEmbeddingFunction, `npm install -S openai`")}this.api_key=e,this.org_id=r||"",this.model=t||"text-embedding-ada-002"}async generate(e){let t=new j.Configuration({organization:this.org_id,apiKey:this.api_key}),r=new j.OpenAIApi(t),n=[],a=(await r.createEmbedding({model:this.model,input:e})).data.data;for(let i=0;i<a.length;i+=1)n.push(a[i].embedding);return n}};var Q,A=class{constructor({cohere_api_key:e,model:t}){try{Q=__2$}catch{throw new Error("Please install the cohere-ai package to use the CohereEmbeddingFunction, `npm install -S cohere-ai`")}this.api_key=e,this.model=t||"large"}async generate(e){return(await Q.embed({texts:e,model:this.model})).body.embeddings}};export{T as ChromaClient,A as CohereEmbeddingFunction,P as Collection,R as OpenAIEmbeddingFunction};
//# sourceMappingURL=chromadb.mjs.map