/* esm.sh - esbuild bundle(suffix-thumb@5.0.2) deno production */
var S=function(e,t={}){return t.hasOwnProperty(e)?t[e]:null},R=function(e,t=[]){for(let r=0;r<t.length;r+=1)if(e.endsWith(t[r]))return e;return null},$=function(e,t,r={}){t=t||{};let n=e.length-1;for(let o=n;o>=1;o-=1){let u=e.length-o,l=e.substring(u,e.length);if(t.hasOwnProperty(l)===!0)return e.slice(0,u)+t[l];if(r.hasOwnProperty(l)===!0)return e.slice(0,u)+r[l]}return t.hasOwnProperty("")?e+=t[""]:r.hasOwnProperty("")?e+=r[""]:null},z=function(e="",t={}){let r=S(e,t.ex);return r=r||R(e,t.same),r=r||$(e,t.fwd,t.both),r=r||e,r},b=z;var v=function(e){return Object.entries(e).reduce((t,r)=>(t[r[1]]=r[0],t),{})},B=function(e={}){return{reversed:!0,both:v(e.both),ex:v(e.ex),fwd:e.rev||{}}},d=B;var N=function(e,t={}){let r=new Set,n=new Set;return e=e.filter(o=>r.has(o[0])||n.has(o[1])?!1:(r.add(o[0]),n.add(o[1]),!0)),e},p=N;var M=function(e,t){return e=p(e),e.filter(r=>{let[n,o]=r;return n.substring(0,1)!==o.substring(0,1)?(t[n]=o,!1):!0})},O=M;var V=function(e,t=0){let r=[],[n,o]=e;for(let l=0;l<n.length&&n[l]===o[l];l+=1)r.push(n[l]);let u=r.length-t;return t>=r.length?null:{from:n.substring(u),to:o.substring(u)}},w=V;var W=function(e,t){if(t.from.length>=e.length)return null;if(e.endsWith(t.from)){let r=e.length-t.from.length;return e.slice(0,r)+t.to}return null},j=W;var J=(e,t)=>{if(t===0)return 100;let r=e/t*100;return r=Math.round(r*10)/10,r},q=function(e,t){let r=0,n=new Set;return e?t.length===0?{total:r,percent:100,rule:e,clear:n,count:0}:(t.forEach(o=>{let u=j(o[0],e);u!==null&&(r+=1,u===o[1]&&n.add(o[0]))}),{total:r,count:n.size,percent:J(n.size,r),rule:e,clear:n}):{total:r,percent:0,rule:e,clear:n,count:0}},a=q;var A=function(e,t,r){let n=e.slice(0),o={};for(let u=0;u<6;u+=1)for(let l=0;l<n.length;l+=1){let c=w(n[l],u),f=a(c,n,r);if(f.rule&&f.percent>r.threshold&&f.count>r.min){if(a(c,t,r).percent<100)continue;o[c.from]=c.to,n=n.filter(i=>f.clear.has(i[0])?(t.push(i),!1):!0)}}return{rules:o,pending:n,finished:t}},x=A;var C=function(e,t,r){let n={},o=t.slice(0),u=[];return Object.entries(e).reverse().forEach(c=>{let f={from:c[1],to:c[0]};if(!f.to)return;let h=a(f,t,r);h.percent>r.threshold&&(n[f.to]=f.from,delete e[f.to],o=o.filter(i=>h.clear.has(i[0])?(u.push(i),!1):!0))}),{fwd:e,both:n,revPairs:{pending:o,finished:u}}},k=C;var D={threshold:80,min:0},F=e=>[e[1],e[0]],G=function(e,t={}){t=Object.assign({},D,t);let r={},n={};e=O(e,r);let{rules:o,pending:u,finished:l}=x(e,[],t),{fwd:c,both:f,revPairs:h}=k(o,e.map(F),t),i=[];if(t.reverse!==!1){let s=x(h.pending,h.finished,t);i=s.pending,n=s.rules}return t.min<=1&&(u.forEach(s=>{r[s[0]]=s[1]}),i.forEach(s=>{r[s[1]]=s[0]})),{fwd:c,both:f,rev:n,ex:r}},H=G;var I=(e,t)=>{let r=[];for(let n=0;n<e.length&&e[n]===t[n];n+=1)r.push(e[n]);return r.join("")},K=function(e,t){let r=I(e,t);return r.length<1?t:r.length+t.substr(r.length)},y=K;var Q=function(e){let t={};Object.keys(e).forEach(n=>{let o=e[n];t[o]=t[o]||[],t[o].push(n)});let r=[];return Object.keys(t).forEach(n=>{r.push(`${n}:${t[n].join(",")}`)}),r.join("\xA6")},m=function(e={}){let t={};return Object.keys(e).forEach(r=>{let n=y(r,e[r]);t[r]=n}),Q(t)},T=function(e){return{fwd:m(e.fwd),both:m(e.both),rev:m(e.rev),ex:m(e.ex)}},U=T;var E=/^([0-9]+)/,X=function(e){let t={};return e.split("\xA6").forEach(r=>{let[n,o]=r.split(":");o=(o||"").split(","),o.forEach(u=>{t[u]=n})}),t},Y=function(e="",t=""){t=String(t);let r=t.match(E);if(r===null)return t;let n=Number(r[1])||0;return e.substring(0,n)+t.replace(E,"")},g=function(e){let t=X(e);return Object.keys(t).reduce((r,n)=>(r[n]=Y(n,t[n]),r),{})},Z=function(e={}){return typeof e=="string"&&(e=JSON.parse(e)),e.fwd=g(e.fwd||""),e.both=g(e.both||""),e.rev=g(e.rev||""),e.ex=g(e.ex||""),e},_=Z;var L=e=>"\x1B[36m"+e+"\x1B[0m",ee=e=>"\x1B[34m"+e+"\x1B[0m",te=(e,t)=>{let r=e/t*100;return r=Math.round(r*10)/10,r+"%"},re=e=>[e[1],e[0]],P=function(e,t){let r=0,n=[];return e.forEach(o=>{let u=b(o[0],t);u===o[1]?r+=1:(console.log("\u274C ",o,"\u2192 "+u),n.push(o))}),te(r,e.length)},ne=function(e,t={}){e=p(e);let r=P(e,t),n=P(e.map(re),d(t));console.log(`${ee(r)}  -  \u{1F504} ${L(n)}`)},oe=ne;export{U as compress,b as convert,H as learn,d as reverse,oe as test,_ as uncompress,p as validate};
//# sourceMappingURL=suffix-thumb.mjs.map