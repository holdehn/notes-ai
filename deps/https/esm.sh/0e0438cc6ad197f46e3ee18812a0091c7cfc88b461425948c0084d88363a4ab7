/* esm.sh - esbuild bundle(density-clustering@1.3.0) deno production */
var k=Object.create;var w=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty;var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),U=(e,t)=>{for(var s in t)w(e,s,{get:t[s],enumerable:!0})},E=(e,t,s,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of B(t))!K.call(e,r)&&r!==s&&w(e,r,{get:()=>t[r],enumerable:!(i=O(t,r))||i.enumerable});return e},p=(e,t,s)=>(E(e,t,"default"),s&&E(s,t,"default")),M=(e,t,s)=>(s=e!=null?k(D(e)):{},E(t||!e||!e.__esModule?w(s,"default",{value:e,enumerable:!0}):s,e));var P=g((J,m)=>{function _(e,t,s,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(e,t,s,i)}_.prototype.run=function(e,t,s,i){this._init(e,t,s,i);for(var r=0;r<this._datasetLength;r++)if(this._visited[r]!==1){this._visited[r]=1;var h=this._regionQuery(r);if(h.length<this.minPts)this.noise.push(r);else{var n=this.clusters.length;this.clusters.push([]),this._addToCluster(r,n),this._expandCluster(n,h)}}return this.clusters};_.prototype._init=function(e,t,s,i){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this.noise=[],this._datasetLength=e.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}t&&(this.epsilon=t),s&&(this.minPts=s),i&&(this.distance=i)};_.prototype._expandCluster=function(e,t){for(var s=0;s<t.length;s++){var i=t[s];if(this._visited[i]!==1){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(t=this._mergeArrays(t,r))}this._assigned[i]!==1&&this._addToCluster(i,e)}};_.prototype._addToCluster=function(e,t){this.clusters[t].push(e),this._assigned[e]=1};_.prototype._regionQuery=function(e){for(var t=[],s=0;s<this._datasetLength;s++){var i=this.distance(this.dataset[e],this.dataset[s]);i<this.epsilon&&t.push(s)}return t};_.prototype._mergeArrays=function(e,t){for(var s=t.length,i=0;i<s;i++){var r=t[i];e.indexOf(r)<0&&e.push(r)}return e};_.prototype._euclideanDistance=function(e,t){for(var s=0,i=Math.min(e.length,t.length);i--;)s+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(s)};typeof m<"u"&&m.exports&&(m.exports=_)});var T=g((Y,x)=>{function l(e,t,s){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(e,t,s)}l.prototype.init=function(e,t,s){this.assignments=[],this.centroids=[],typeof e<"u"&&(this.dataset=e),typeof t<"u"&&(this.k=t),typeof s<"u"&&(this.distance=s)};l.prototype.run=function(e,t){this.init(e,t);for(var s=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var h=0;h<this.k;h++){for(var n=new Array(y),o=0,a=0;a<y;a++)n[a]=0;for(var d=0;d<s;d++){var y=this.dataset[d].length;if(h===this.assignments[d]){for(var a=0;a<y;a++)n[a]+=this.dataset[d][a];o++}}if(o>0){for(var a=0;a<y;a++)n[a]/=o;this.centroids[h]=n}else this.centroids[h]=this.randomCentroid(),r=!0}}return this.getClusters()};l.prototype.randomCentroid=function(){var e=this.dataset.length-1,t,s;do s=Math.round(Math.random()*e),t=this.dataset[s];while(this.centroids.indexOf(t)>=0);return t};l.prototype.assign=function(){for(var e=!1,t=this.dataset.length,s,i=0;i<t;i++)s=this.argmin(this.dataset[i],this.centroids,this.distance),s!=this.assignments[i]&&(this.assignments[i]=s,e=!0);return e};l.prototype.getClusters=function(){for(var e=new Array(this.k),t,s=0;s<this.assignments.length;s++)t=this.assignments[s],typeof e[t]>"u"&&(e[t]=[]),e[t].push(s);return e};l.prototype.argmin=function(e,t,s){for(var i=Number.MAX_VALUE,r=0,h=t.length,n,o=0;o<h;o++)n=s(e,t[o]),n<i&&(i=n,r=o);return r};l.prototype.distance=function(e,t){for(var s=0,i=Math.min(e.length,t.length);i--;){var r=e[i]-t[i];s+=r*r}return Math.sqrt(s)};typeof x<"u"&&x.exports&&(x.exports=l)});var q=g((Z,A)=>{function u(e,t,s){this._queue=[],this._priorities=[],this._sorting="desc",this._init(e,t,s)}u.prototype.insert=function(e,t){for(var s=this._queue.length,i=s;i--;){var r=this._priorities[i];this._sorting==="desc"?t>r&&(s=i):t<r&&(s=i)}this._insertAt(e,t,s)};u.prototype.remove=function(e){for(var t=this._queue.length;t--;){var s=this._queue[t];if(e===s){this._queue.splice(t,1),this._priorities.splice(t,1);break}}};u.prototype.forEach=function(e){this._queue.forEach(e)};u.prototype.getElements=function(){return this._queue};u.prototype.getElementPriority=function(e){return this._priorities[e]};u.prototype.getPriorities=function(){return this._priorities};u.prototype.getElementsWithPriorities=function(){for(var e=[],t=0,s=this._queue.length;t<s;t++)e.push([this._queue[t],this._priorities[t]]);return e};u.prototype._init=function(e,t,s){if(e&&t){if(this._queue=[],this._priorities=[],e.length!==t.length)throw new Error("Arrays must have the same length");for(var i=0;i<e.length;i++)this.insert(e[i],t[i])}s&&(this._sorting=s)};u.prototype._insertAt=function(e,t,s){this._queue.length===s?(this._queue.push(e),this._priorities.push(t)):(this._queue.splice(s,0,e),this._priorities.splice(s,0,t))};typeof A<"u"&&A.exports&&(A.exports=u)});var S=g(($,v)=>{typeof v<"u"&&v.exports&&(Q=q());var Q;function f(e,t,s,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(e,t,s,i)}f.prototype.run=function(e,t,s,i){this._init(e,t,s,i);for(var r=0,h=this.dataset.length;r<h;r++)if(this._processed[r]!==1){this._processed[r]=1,this.clusters.push([r]);var n=this.clusters.length-1;this._orderedList.push(r);var o=new Q(null,null,"asc"),a=this._regionQuery(r);this._distanceToCore(r)!==void 0&&(this._updateQueue(r,a,o),this._expandCluster(n,o))}return this.clusters};f.prototype.getReachabilityPlot=function(){for(var e=[],t=0,s=this._orderedList.length;t<s;t++){var i=this._orderedList[t],r=this._reachability[i];e.push([i,r])}return e};f.prototype._init=function(e,t,s,i){if(e){if(!(e instanceof Array))throw Error("Dataset must be of type array, "+typeof e+" given");this.dataset=e,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}t&&(this.epsilon=t),s&&(this.minPts=s),i&&(this.distance=i)};f.prototype._updateQueue=function(e,t,s){var i=this;this._coreDistance=this._distanceToCore(e),t.forEach(function(r){if(i._processed[r]===void 0){var h=i.distance(i.dataset[e],i.dataset[r]),n=Math.max(i._coreDistance,h);i._reachability[r]===void 0?(i._reachability[r]=n,s.insert(r,n)):n<i._reachability[r]&&(i._reachability[r]=n,s.remove(r),s.insert(r,n))}})};f.prototype._expandCluster=function(e,t){for(var s=t.getElements(),i=0,r=s.length;i<r;i++){var h=s[i];if(this._processed[h]===void 0){var n=this._regionQuery(h);this._processed[h]=1,this.clusters[e].push(h),this._orderedList.push(h),this._distanceToCore(h)!==void 0&&(this._updateQueue(h,n,t),this._expandCluster(e,t))}}};f.prototype._distanceToCore=function(e){for(var t=this.epsilon,s=0;s<t;s++){var i=this._regionQuery(e,s);if(i.length>=this.minPts)return s}};f.prototype._regionQuery=function(e,t){t=t||this.epsilon;for(var s=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[e],this.dataset[i])<t&&s.push(i);return s};f.prototype._euclideanDistance=function(e,t){for(var s=0,i=Math.min(e.length,t.length);i--;)s+=(e[i]-t[i])*(e[i]-t[i]);return Math.sqrt(s)};typeof v<"u"&&v.exports&&(v.exports=f)});var L=g((R,C)=>{typeof C<"u"&&C.exports&&(C.exports={DBSCAN:P(),KMEANS:T(),OPTICS:S(),PriorityQueue:q()})});var c={};U(c,{DBSCAN:()=>V,KMEANS:()=>W,OPTICS:()=>X,PriorityQueue:()=>z,default:()=>G});var b=M(L());p(c,M(L()));var{DBSCAN:V,KMEANS:W,OPTICS:X,PriorityQueue:z}=b,{default:N,...F}=b,G=N!==void 0?N:F;export{V as DBSCAN,W as KMEANS,X as OPTICS,z as PriorityQueue,G as default};
//# sourceMappingURL=density-clustering.mjs.map