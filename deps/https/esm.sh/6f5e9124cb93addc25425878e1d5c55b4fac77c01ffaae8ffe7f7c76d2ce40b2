/* esm.sh - esbuild bundle(cohere-ai@5.1.0) deno production */
import  { Buffer as __Buffer$ } from "https://deno.land/std@0.177.1/node/buffer.ts";var __global$ = globalThis || (typeof window !== "undefined" ? window : self);import __1$ from "https://deno.land/std@0.177.1/node/https.ts";var K=Object.create;var q=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var U=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var P=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(i,c)=>(typeof require<"u"?require:i)[c]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+a+'" is not supported')});var T=(a,i)=>()=>(i||a((i={exports:{}}).exports,i),i.exports),V=(a,i)=>{for(var c in i)q(a,c,{get:i[c],enumerable:!0})},I=(a,i,c,S)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of j(i))!N.call(a,l)&&l!==c&&q(a,l,{get:()=>i[l],enumerable:!(S=Z(i,l))||S.enumerable});return a},C=(a,i,c)=>(I(a,i,"default"),c&&I(c,i,"default")),B=(a,i,c)=>(c=a!=null?K(U(a)):{},I(i||!a||!a.__esModule?q(c,"default",{value:a,enumerable:!0}):c,a));var D=T((A,M)=>{(function(i,c){typeof A=="object"&&typeof M=="object"?M.exports=c():typeof define=="function"&&define.amd?define([],c):typeof A=="object"?A.cohere=c():i.cohere=c()})(__global$,()=>(()=>{"use strict";var a={828:function(l,k,d){var m=this&&this.__assign||function(){return m=Object.assign||function(o){for(var n,f=1,r=arguments.length;f<r;f++){n=arguments[f];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(o[u]=n[u])}return o},m.apply(this,arguments)},g=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},y=g(d(836)),h;(function(o){o.GENERATE="/generate",o.EMBED="/embed",o.CLASSIFY="/classify",o.TOKENIZE="/tokenize",o.DETOKENIZE="/detokenize",o.DETECT_LANGUAGE="/detect-language",o.SUMMARIZE="/summarize"})(h||(h={}));var x=5,R=function(){function o(){}return o.prototype.init=function(n,f){y.default.init(n,f)},o.prototype.makeRequest=function(n,f){return y.default.post(n,f)},o.prototype.generate=function(n){return this.makeRequest(h.GENERATE,n)},o.prototype.tokenize=function(n){var f=n.text;return this.makeRequest(h.TOKENIZE,{text:f})},o.prototype.detokenize=function(n){var f=n.tokens;return this.makeRequest(h.DETOKENIZE,{tokens:f})},o.prototype.embed=function(n){var f=this,r=function(u){for(var s=[],e=0,_=u;e<_.length;e++){var v=_[e],E=s[s.length-1];!E||E.length===x?s.push([v]):E.push(v)}return s};return Promise.all(r(n.texts).map(function(u){return f.makeRequest(h.EMBED,m(m({},n),{texts:u}))})).then(function(u){var s=[];u.forEach(function(_){s=s.concat(_.body.embeddings)});var e={statusCode:u[0].statusCode,body:{embeddings:s}};return e})},o.prototype.classify=function(n){return this.makeRequest(h.CLASSIFY,n)},o.prototype.detectLanguage=function(n){return this.makeRequest(h.DETECT_LANGUAGE,n)},o.prototype.summarize=function(n){return this.makeRequest(h.SUMMARIZE,n)},o}(),O=new R;l.exports=O},836:function(l,k,d){var m=this&&this.__awaiter||function(n,f,r,u){function s(e){return e instanceof r?e:new r(function(_){_(e)})}return new(r||(r=Promise))(function(e,_){function v(p){try{t(u.next(p))}catch(b){_(b)}}function E(p){try{t(u.throw(p))}catch(b){_(b)}}function t(p){p.done?e(p.value):s(p.value).then(v,E)}t((u=u.apply(n,f||[])).next())})},g=this&&this.__generator||function(n,f){var r={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},u,s,e,_;return _={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function v(t){return function(p){return E([t,p])}}function E(t){if(u)throw new TypeError("Generator is already executing.");for(;_&&(_=0,t[0]&&(r=0)),r;)try{if(u=1,s&&(e=t[0]&2?s.return:t[0]?s.throw||((e=s.return)&&e.call(s),0):s.next)&&!(e=e.call(s,t[1])).done)return e;switch(s=0,e&&(t=[t[0]&2,e.value]),t[0]){case 0:case 1:e=t;break;case 4:return r.label++,{value:t[1],done:!1};case 5:r.label++,s=t[1],t=[0];continue;case 7:t=r.ops.pop(),r.trys.pop();continue;default:if(e=r.trys,!(e=e.length>0&&e[e.length-1])&&(t[0]===6||t[0]===2)){r=0;continue}if(t[0]===3&&(!e||t[1]>e[0]&&t[1]<e[3])){r.label=t[1];break}if(t[0]===6&&r.label<e[1]){r.label=e[1],e=t;break}if(e&&r.label<e[2]){r.label=e[2],r.ops.push(t);break}e[2]&&r.ops.pop(),r.trys.pop();continue}t=f.call(n,r)}catch(p){t=[6,p],s=0}finally{u=e=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}},y=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},h=d(687),x=y(d(959)),R;(function(n){n.COHERE_API="api.cohere.ai"})(R||(R={}));var O=function(){function n(){this.COHERE_API_KEY="",this.COHERE_VERSION=""}return n.prototype.init=function(f,r){this.COHERE_API_KEY=f,r===void 0?this.COHERE_VERSION="2022-12-06":this.COHERE_VERSION=r},n.prototype.post=function(f,r){return m(this,void 0,void 0,function(){var u=this;return g(this,function(s){return[2,new Promise(function(e,_){try{r=JSON.parse("".concat(r))}catch{}var v=JSON.stringify(r),E=h.request({hostname:R.COHERE_API,path:f,method:"POST",headers:{"Content-Type":"application/json; charset=utf-8","Content-Length":__Buffer$.byteLength(v,"utf8"),"Cohere-Version":u.COHERE_VERSION,Authorization:"Bearer ".concat(u.COHERE_API_KEY),"Request-Source":"node-sdk"},timeout:5e3},function(t){var p=[];t.on("data",function(b){return p.push(b)}),t.on("end",function(){if("x-api-warning"in t.headers){var b=t.headers["x-api-warning"];if(typeof b=="string")console.warn("\x1B[33mWarning: %s\x1B[0m",b);else for(var G in b)console.warn("\x1B[33mWarning: %s\x1B[0m",G)}e({statusCode:t.statusCode,body:JSON.parse(__Buffer$.concat(p).toString())})})});E.on("error",function(t){return _(x.default.handleError(t))}),E.write(v,"utf8"),E.end()})]})})},n}(),o=new O;l.exports=o},959:l=>{var k=function(){function m(){}return m.prototype.handleError=function(g){var y,h,x,R=((y=g.response)===null||y===void 0?void 0:y.status)||500,O=((x=(h=g.response)===null||h===void 0?void 0:h.data)===null||x===void 0?void 0:x.message)||g.message;return{statusCode:R,body:{message:O}}},m}(),d=new k;l.exports=d},687:l=>{l.exports=__1$}},i={};function c(l){var k=i[l];if(k!==void 0)return k.exports;var d=i[l]={exports:{}};return a[l].call(d.exports,d,d.exports,c),d.exports}var S=c(828);return S})())});var H=T((Q,L)=>{L.exports=D()});var w={};V(w,{default:()=>F});var Y=B(H());C(w,B(H()));var{default:z,...J}=Y,F=z!==void 0?z:J;export{F as default};
//# sourceMappingURL=cohere-ai.mjs.map